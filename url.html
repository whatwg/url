<!DOCTYPE html><html lang=en><meta charset=utf-8>
  <title>URL Standard</title>
  <link href=https://www.whatwg.org/style/specification rel=stylesheet>
  <link href=https://resources.whatwg.org/logo-url.svg rel=icon>
<script async src=//resources.whatwg.org/file-bug.js></script>
  <script id=head src=//resources.whatwg.org/dfn.js></script>





<script>
document.addEventListener("DOMContentLoaded", function(event) {
  // no backrefs for index
  document.querySelector('.indexlist').classList.add('no-backref');

  // as bikeshed relocates script elements, add the script element for dfn.js
  // after document loads
  var script = document.createElement('script');
  script.setAttribute('id', 'head');
  script.setAttribute('src', 'https://resources.whatwg.org/dfn.js');
  document.body.appendChild(script);
});
</script>

<body class=h-entry>
<div class=head>
  <p data-fill-with=logo><a class=logo href=http://www.whatwg.org/>
    <img alt=WHATWG height=100 src=https://resources.whatwg.org/logo-url.svg>
</a>
</p>
  <h1 class="p-name no-ref" id=title>URL</h1>
  <h2 class="no-num no-toc no-ref heading settled" id=subtitle><span class=content>Living Standard — Last Updated
    <span class=dt-updated><span class=value-title title=20141116>16 November 2014</span></span></span></h2>
  <div data-fill-with=spec-metadata><dl><dt>Version History:<dd><span><a href=https://github.com/whatwg/url/commits>https://github.com/whatwg/url/commits</a> <a href=https://twitter.com/urlstandard>@urlstandard</a></span><dt>Participate:<dd><span><a href="https://www.w3.org/Bugs/Public/enter_bug.cgi?product=WHATWG&amp;component=URL">file a bug</a> (<a href="https://www.w3.org/Bugs/Public/buglist.cgi?product=WHATWG&amp;component=URL&amp;resolution=---">open bugs</a>)</span><dd><span><a href=https://whatwg.org/mailing-list>whatwg@whatwg.org</a> (<a href=https://whatwg.org/mailing-list#specs>archives</a>)</span><dd><span><a href=http://wiki.whatwg.org/wiki/IRC>IRC: #whatwg on Freenode</a></span></dl></div>
  <div data-fill-with=warning></div>
</div>

<h2 class="no-num no-toc no-ref heading settled" id=abstract><span class=content>Abstract</span></h2>
<div class=p-summary data-fill-with=abstract><p>This specification provides APIs for creating, parsing, and working with universal identifiers.</p>

</div>
<div data-fill-with=at-risk></div>

<h2 class="no-num no-toc no-ref heading settled" id=contents><span class=content>Table of Contents</span></h2>
<div data-fill-with=table-of-contents role=navigation><ul class=toc role=directory><li><a href=#goals><span class=secno></span> <span class=content>Goals</span></a><li><a href=#terminology><span class=secno>1</span> <span class=content>Terminology</span></a><ul class=toc><li><a href=#parsers><span class=secno>1.1</span> <span class=content>Parsers</span></a></ul><li><a href=#percent-encoded-bytes><span class=secno>2</span> <span class=content>Percent-encoded bytes</span></a><li><a href=#hosts-(domains-and-ip-addresses)><span class=secno>3</span> <span class=content>Hosts (domains and IP addresses)</span></a><ul class=toc><li><a href=#idna><span class=secno>3.1</span> <span class=content>IDNA</span></a><li><a href=#host-writing><span class=secno>3.2</span> <span class=content>Host writing</span></a><li><a href=#host-parsing><span class=secno>3.3</span> <span class=content>Host parsing</span></a><li><a href=#host-serializing><span class=secno>3.4</span> <span class=content>Host serializing</span></a></ul><li><a href=#urls><span class=secno>4</span> <span class=content>URLs</span></a><ul class=toc><li><a href=#url-writing><span class=secno>4.1</span> <span class=content>URL writing</span></a><li><a href=#url-parsing><span class=secno>4.2</span> <span class=content>URL parsing</span></a><li><a href=#url-serializing><span class=secno>4.3</span> <span class=content>URL serializing</span></a><li><a href=#origin><span class=secno>4.4</span> <span class=content>Origin</span></a></ul><li><a href=#application/x-www-form-urlencoded><span class=secno>5</span> <span class=content><code title=application-x-www-form-urlencoded-0><span data-link-type=dfn title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</span></code></span></a><ul class=toc><li><a href=#urlencoded-parsing><span class=secno>5.1</span> <span class=content><code title=application-x-www-form-urlencoded-0>application/x-www-form-urlencoded</code> parsing</span></a><li><a href=#urlencoded-serializing><span class=secno>5.2</span> <span class=content><code title=application-x-www-form-urlencoded-0>application/x-www-form-urlencoded</code> serializing</span></a><li><a href=#urlencoded-hooks><span class=secno>5.3</span> <span class=content>Hooks</span></a></ul><li><a href=#api><span class=secno>6</span> <span class=content>API</span></a><ul class=toc><li><a href=#constructors><span class=secno>6.1</span> <span class=content>Constructors</span></a><li><a href=#url-statics><span class=secno>6.2</span> <span class=content><code><span data-link-type=interface title=URL>URL</span></code> statics</span></a><li><a href=#urlutils-and-urlutilsreadonly-members><span class=secno>6.3</span> <span class=content><code><span data-link-type=interface title=URLUtils>URLUtils</span></code> and <code><span data-link-type=interface title=URLUtilsReadOnly>URLUtilsReadOnly</span></code> members</span></a><li><a href=#interface-urlsearchparams><span class=secno>6.4</span> <span class=content>Interface <code><span data-link-type=interface title=URLSearchParams>URLSearchParams</span></code></span></a><li><a href=#url-apis-elsewhere><span class=secno>6.5</span> <span class=content>URL APIs elsewhere</span></a></ul><li><a href=#acknowledgments><span class=secno></span> <span class=content>Acknowledgments</span></a><li><a href=#conformance><span class=secno></span> <span class=content>Conformance</span></a><li><a href=#references><span class=secno></span> <span class=content>References</span></a><ul class=toc><li><a href=#normative><span class=secno></span> <span class=content>Normative References</span></a><li><a href=#informative><span class=secno></span> <span class=content>Informative References</span></a></ul><li><a href=#index><span class=secno></span> <span class=content>Index</span></a><li><a href=#idl-index><span class=secno></span> <span class=content>IDL Index</span></a></ul></div>
<main>


<h2 class="no-num heading settled" id=goals><span class=content>Goals</span></h2>

<p>The URL standard takes the following approach towards making URLs fully interoperable:

<ul>
 <li><p>Align RFC 3986 and RFC 3987 with contemporary implementations and
 obsolete them in the process. (E.g. spaces, other "illegal" code points,
 query encoding, equality, canonicalization, are all concepts not entirely
 shared, or defined.) URL parsing needs to become as solid as HTML parsing.
 <a data-biblio-type=informative data-link-type=biblio href=#biblio-rfc3986 title=RFC3986>[RFC3986]</a>
 <a data-biblio-type=informative data-link-type=biblio href=#biblio-rfc3987 title=RFC3987>[RFC3987]</a>

 <li><p>Standardize on the term URL. URI and IRI are just confusing. In
 practice a single algorithm is used for both so keeping them distinct is
 not helping anyone. URL also easily wins the
 <a href="http://www.googlefight.com/index.php?word1=url&amp;word2=uri">search result popularity contest</a>.

 <li><p>Supplanting <a href=https://tools.ietf.org/html/rfc6454#section-4>Origin of a URI [sic]</a>.
 <a data-biblio-type=informative data-link-type=biblio href=#biblio-rfc6454 title=RFC6454>[RFC6454]</a>

 <li><p>Define URL’s existing JavaScript API in full detail and add
 enhancements to make it easier to work with. Add a new <code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code>
 object as well for URL manipulation without usage of HTML elements. (Useful
 for JavaScript worker environments.)
</ul>

<p class=note role=note>As the editor learns more about the subject matter the goals
might increase in scope somewhat.



<h2 class="heading settled" data-level=1 id=terminology><span class=secno>1. </span><span class=content>Terminology</span><a class=self-link href=#terminology></a></h2>

<p>Some terms used in this specification are defined in the
DOM, Encoding, IDNA, and Web IDL Standards.
<a data-biblio-type=normative data-link-type=biblio href=#biblio-dom title=DOM>[DOM]</a>
<a data-biblio-type=normative data-link-type=biblio href=#biblio-encoding title=ENCODING>[ENCODING]</a>
<a data-biblio-type=normative data-link-type=biblio href=#biblio-idna title=IDNA>[IDNA]</a>
<a data-biblio-type=normative data-link-type=biblio href=#biblio-webidl title=WEBIDL>[WEBIDL]</a>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=ascii-digits>ASCII digits<a class=self-link href=#ascii-digits></a></dfn> are code points in the range U+0030 to U+0039.


<p>The <dfn data-dfn-type=dfn data-noexport="" id=ascii-hex-digits>ASCII hex digits<a class=self-link href=#ascii-hex-digits></a></dfn> are <a data-link-type=dfn href=#ascii-digits title="ASCII digits">ASCII digits</a> or are
code points in the range U+0041 to U+0046 or in the range U+0061 to U+0066.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=ascii-alpha>ASCII alpha<a class=self-link href=#ascii-alpha></a></dfn> are code points in the range U+0041 to U+005A
or in the range U+0061 to U+007A.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=ascii-alphanumeric>ASCII alphanumeric<a class=self-link href=#ascii-alphanumeric></a></dfn> are <a data-link-type=dfn href=#ascii-digits title="ASCII digits">ASCII digits</a> or
<a data-link-type=dfn href=#ascii-alpha title="ASCII alpha">ASCII alpha</a>.


<h3 class="heading settled" data-level=1.1 id=parsers><span class=secno>1.1. </span><span class=content>Parsers</span><a class=self-link href=#parsers></a></h3>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=eof-code-point>EOF code point<a class=self-link href=#eof-code-point></a></dfn> is a conceptual code point that signifies the end of a
string or code point stream.

<p>A <dfn data-dfn-type=dfn data-noexport="" id=parse-error>parse error<a class=self-link href=#parse-error></a></dfn> indicates a non-fatal mismatch between input and requirements.
User agents are encouraged to expose <a data-link-type=dfn href=#parse-error title="parse error">parse errors</a>
somehow.

<p>Within a parser algorithm that uses a <var>pointer</var> variable, <dfn data-dfn-type=dfn data-noexport="" id=c>c<a class=self-link href=#c></a></dfn>
references the code point the <var>pointer</var> variable points to.

<p>Within a string-based parser algorithm that uses a <var>pointer</var> variable,
<dfn data-dfn-type=dfn data-noexport="" id=remaining>remaining<a class=self-link href=#remaining></a></dfn> references the substring after <var>pointer</var> in the string
being processed.

<p class=example>If "<code>mailto:username@example</code>" is a string being
processed and <var>pointer</var> points to "<code>@</code>",
<a data-link-type=dfn href=#c title=c>c</a> is "<code>@</code>" and <a data-link-type=dfn href=#remaining title=remaining>remaining</a> is
"<code>example</code>".



<h2 class="heading settled" data-level=2 id=percent-encoded-bytes><span class=secno>2. </span><span class=content>Percent-encoded bytes</span><a class=self-link href=#percent-encoded-bytes></a></h2>

<p>A <dfn data-dfn-type=dfn data-noexport="" id=percent-encoded-byte>percent-encoded byte<a class=self-link href=#percent-encoded-byte></a></dfn> is "<code>%</code>", followed by
two <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digits</a>. Sequences of
<a data-link-type=dfn href=#percent-encoded-byte title="percent-encoded byte">percent-encoded bytes</a>, after
conversion to bytes, should not cause a
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-decoder title="utf-8 decoder">utf-8 decoder</a> to run into any
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#error title=error>errors</a>.

<p>To <dfn data-dfn-type=dfn data-noexport="" id=percent-encode>percent encode<a class=self-link href=#percent-encode></a></dfn> a <var>byte</var> into a
<a data-link-type=dfn href=#percent-encoded-byte title="percent-encoded byte">percent-encoded byte</a>, return a string consisting of
"<code>%</code>", followed by a double-digit, uppercase, hexadecimal
representation of <var>byte</var>.

<p>To <dfn data-dfn-type=dfn data-noexport="" id=percent-decode>percent decode<a class=self-link href=#percent-decode></a></dfn> a byte sequence <var>input</var>, run these steps:

<p class=warning>Using anything but a <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-decoder title="utf-8 decoder">utf-8 decoder</a>
when the <var>input</var> contains bytes outside the range 0x00 to 0x7F might be
insecure and is not recommended.

<ol>
 <li><p>Let <var>output</var> be an empty byte sequence.

 <li>
  <p>For each byte <var>byte</var> in <var>input</var>, run these steps:

  <ol>
   <li><p>If <var>byte</var> is not `<code>%</code>`, append
   <var>byte</var> to <var>output</var>.

   <li><p>Otherwise, if <var>byte</var> is `<code>%</code>` and the next two
   bytes after <var>byte</var> in <var>input</var> are not in the ranges
   0x30 to 0x39, 0x41 to 0x46, and 0x61 to 0x66, append <var>byte</var> to
   <var>output</var>.

   <li>
    <p>Otherwise, run these substeps:

    <ol>
     <li><p>Let <var>bytePoint</var> be the two bytes after <var>byte</var> in
     <var>input</var>,
     <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom title="utf-8 decode without BOM">decoded</a>, and
     then interpreted as hexadecimal number.
     

     <li><p>Append a byte whose value is <var>bytePoint</var> to
     <var>output</var>.

     <li><p>Skip the next two bytes in <var>input</var>.
    </ol>
  </ol>

 <li><p>Return <var>output</var>.
</ol>

<p></p>
<p>The <dfn data-dfn-type=dfn data-noexport="" id=simple-encode-set>simple encode set<a class=self-link href=#simple-encode-set></a></dfn> are all code points less than
U+0020 (i.e. excluding U+0020) and all code points greater than U+007E.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=default-encode-set>default encode set<a class=self-link href=#default-encode-set></a></dfn> is the
<a data-link-type=dfn href=#simple-encode-set title="simple encode set">simple encode set</a> and code points U+0020,
'<code>"</code>', 
"<code>#</code>", 
"<code>&lt;</code>", 
"<code>&gt;</code>", 
"<code>?</code>", 
and
"<code>`</code>". 

<p>The <dfn data-dfn-type=dfn data-noexport="" id=password-encode-set>password encode set<a class=self-link href=#password-encode-set></a></dfn> is the
<a data-link-type=dfn href=#default-encode-set title="default encode set">default encode set</a> and code points
"<code>/</code>", 
"<code>@</code>", 
and
"<code>\</code>". 

<p>The <dfn data-dfn-type=dfn data-noexport="" id=username-encode-set>username encode set<a class=self-link href=#username-encode-set></a></dfn> is the
<a data-link-type=dfn href=#password-encode-set title="password encode set">password encode set</a> and code point
"<code>:</code>". 

<p>To <dfn data-dfn-type=dfn data-noexport="" id=utf-8-percent-encode>utf-8 percent encode<a class=self-link href=#utf-8-percent-encode></a></dfn> a <var>code point</var>, using
an <var>encode set</var>, run these steps:

<ol>
 <li><p>If <var>code point</var> is not in
 <var>encode set</var>, return <var>code point</var>.

 <li><p>Let <var>bytes</var> be the result of running
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-encode title="utf-8 encode">utf-8 encode</a> on
 <var>code point</var>.

 <li><p><a data-link-type=dfn href=#percent-encode title="Percent encode">Percent encode</a> each byte in <var>bytes</var>, and
 then return them concatenated, in the same order.
</ol>



<h2 class="heading settled" data-level=3 id=hosts-(domains-and-ip-addresses)><span class=secno>3. </span><span class=content>Hosts (domains and IP addresses)</span><a class=self-link href=#hosts-%28domains-and-ip-addresses%29></a></h2>



<p>A <dfn data-dfn-type=dfn data-noexport="" id=concept-host>host<a class=self-link href=#concept-host></a></dfn> is a network address in the form of a
<a data-link-type=dfn href=#concept-domain title=domain>domain</a> or an
<a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a>.

<p>A <dfn data-dfn-type=dfn data-noexport="" id=concept-domain>domain<a class=self-link href=#concept-domain></a></dfn> identifies a realm within a network.

<p>An <dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6 title=IPv6>IPv6 address<a class=self-link href=#concept-ipv6></a></dfn> is a 128-bit identifier and
for the purposes of this specification represented as an ordered list of
eight <dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6-piece title="IPv6 piece">16-bit pieces<a class=self-link href=#concept-ipv6-piece></a></dfn>.
<a data-biblio-type=informative data-link-type=biblio href=#biblio-rfc4291 title=RFC4291>[RFC4291]</a>


<h3 class="heading settled" data-level=3.1 id=idna><span class=secno>3.1. </span><span class=content>IDNA</span><a class=self-link href=#idna></a></h3>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-domain-to-ascii>domain to ASCII<a class=self-link href=#concept-domain-to-ascii></a></dfn> given a
<a data-link-type=dfn href=#concept-domain title=domain>domain</a> <var>domain</var>, runs these steps:

<ol>
 <li><p>Let <var>result</var> be the result of running
 <a data-link-type=dfn href=http://www.unicode.org/reports/tr46/#ToASCII title=ToASCII>Unicode ToASCII</a> with
 <i>domain_name</i> set to <var>domain</var>,
 <i>UseSTD3ASCIIRules</i> set to false, <i>processing_option</i> set to
 <i>Transitional_Processing</i>, and <i>VerifyDnsLength</i> set to false.

 <li><p>If <var>result</var> is a failure value, return failure.

 <li><p>Return <var>result</var>.
</ol>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-domain-to-unicode>domain to Unicode<a class=self-link href=#concept-domain-to-unicode></a></dfn> given a
<a data-link-type=dfn href=#concept-domain title=domain>domain</a> <var>domain</var>, runs these steps:

<ol>
 <li><p>Let <var>result</var> be the result of running
 <a data-link-type=dfn href=http://www.unicode.org/reports/tr46/#ToUnicode title=ToUnicode>Unicode ToUnicode</a> with
 <i>domain_name</i> set to <var>domain</var>,
 <i>UseSTD3ASCIIRules</i> set to false.

 <li>
  <p>Return <var>result</var>, ignoring any returned errors.

  <p class=note role=note>User agents are encouraged to report errors through a developer console.
</ol>


<h3 class="heading settled" data-level=3.2 id=host-writing><span class=secno>3.2. </span><span class=content>Host writing</span><a class=self-link href=#host-writing></a></h3>

<p>A <a data-link-type=dfn href=#concept-host title=host>host</a> must be either a
<a data-link-type=dfn href=#concept-domain title=domain>domain</a> or "<code>[</code>", followed
by an <a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a>, followed by
"<code>]</code>".

<p>A <var>domain</var> is a <dfn data-dfn-type=dfn data-noexport="" id=valid-domain>valid domain<a class=self-link href=#valid-domain></a></dfn> if these steps return success:

<ol>
 <li><p>Let <var>result</var> be the result of running
 <a data-link-type=dfn href=http://www.unicode.org/reports/tr46/#ToASCII title=ToASCII>Unicode ToASCII</a> with
 <i>domain_name</i> set to <var>domain</var>,
 <i>UseSTD3ASCIIRules</i> set to true, <i>processing_option</i> set to
 <i>Nontransitional_Processing</i>, and <i>VerifyDnsLength</i> set to true.

 <li><p>If <var>result</var> is a failure value, return failure.

 <li><p>Set <var>result</var> to the result of running
 <a data-link-type=dfn href=http://www.unicode.org/reports/tr46/#ToUnicode title=ToUnicode>Unicode ToUnicode</a> with
 <i>domain_name</i> set to <var>result</var>,
 <i>UseSTD3ASCIIRules</i> set to true.

 <li><p>If <var>result</var> contains any errors, return failure.

 <li><p>Return success.
</ol>

<p class=XXX>Ideally we define this in terms of a sequence of code points that make up a
<a data-link-type=dfn href=#valid-domain title="valid domain">valid domain</a> rather than through a whack-a-mole:
<a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=25334">bug 25334</a>.

<p>A <a data-link-type=dfn href=#concept-domain title=domain>domain</a> must be a string that is a
<a data-link-type=dfn href=#valid-domain title="valid domain">valid domain</a>.

<p>An <a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a> is defined in the
<a href=http://tools.ietf.org/html/rfc4291#section-2.2>"Text Representation of Addresses" chapter of IP Version 6 Addressing Architecture</a>.
<a data-biblio-type=normative data-link-type=biblio href=#biblio-rfc4291 title=RFC4291>[RFC4291]</a>
</p>


<h3 class="heading settled" data-level=3.3 id=host-parsing><span class=secno>3.3. </span><span class=content>Host parsing</span><a class=self-link href=#host-parsing></a></h3>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-host-parser>host parser<a class=self-link href=#concept-host-parser></a></dfn> takes a string
<var>input</var> and optionally a <var>Unicode flag</var>, and then runs
these steps:

<ol>
 <li><p>If <var>input</var> is the empty string, return failure.
 </p>

 <li>
  <p>If <var>input</var> starts with "<code>[</code>", run these
  substeps:

  <ol>
   <li><p>If <var>input</var> does not end with
   "<code>]</code>", <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

   <li><p>Return the result of
   <a data-link-type=dfn href=#concept-ipv6-parser title="IPv6 parser">IPv6 parsing</a> <var>input</var>
   with its leading "<code>[</code>" and trailing
   "<code>]</code>" removed.
  </ol>

 <li><p>Let <var>domain</var> be the result of
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom title="utf-8 decode without BOM">utf-8 decode without BOM</a> on the
 <a data-link-type=dfn href=#percent-decode title="percent decode">percent decoding</a> of
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-encode title="utf-8 encode">utf-8 encode</a> on <var>input</var>.
 

 <li><p>Let <var>asciiDomain</var> be the result of running
 <a data-link-type=dfn href=#concept-domain-to-ascii title="domain to ASCII">domain to ASCII</a> on <var>domain</var>.

 <li><p>If <var>asciiDomain</var> is failure, return failure.

 <li>
  <p>If <var>asciiDomain</var> contains one of
  U+0000,
  U+0009,
  U+000A,
  U+000D,
  U+0020,
  "<code>#</code>",
  "<code>%</code>",
  "<code>/</code>",
  "<code>:</code>",
  "<code>?</code>",
  "<code>@</code>",
  "<code>[</code>",
  "<code>\</code>",
  and
  "<code>]</code>",
  return failure.

 <li><p>Return <var>asciiDomain</var> if the <var>Unicode flag</var> is unset,
 and the result of running <a data-link-type=dfn href=#concept-domain-to-unicode title="domain to Unicode">domain to Unicode</a>
 on <var>asciiDomain</var> otherwise.
</ol>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6-parser>IPv6 parser<a class=self-link href=#concept-ipv6-parser></a></dfn> takes a string
<var>input</var> and then runs these steps:

<ol>
 <li><p>Let <var>address</var> be a new
 <a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a> with its
 <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit pieces</a> initialized to 0.

 <li><p>Let <var>piece pointer</var> be a pointer into
 <var>address</var>’s
 <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit pieces</a>, initially zero
 (pointing to the first <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit piece</a>),
 and let <var>piece</var> be the
 <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit piece</a> it points to.

 <li><p>Let <var>compress pointer</var> be another pointer into
 <var>address</var>’s <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit pieces</a>, initially
 null and pointing to nothing.

 <li><p>Let <var>pointer</var> be a pointer into
 <var>input</var>, initially zero (pointing to the first code point).

 <li>
  <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>:</code>", run these substeps:

  <ol>
   <li><p>If <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does not start with
   "<code>:</code>", <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

   <li><p>Increase <var>pointer</var> by two.

   <li><p>Increase <var>piece pointer</var> by one and then set
   <var>compress pointer</var> to <var>piece pointer</var>.
  </ol>

 <li>
  <p><dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6-parser-main title="IPv6 parser Main">Main<a class=self-link href=#concept-ipv6-parser-main></a></dfn>:
  While <a data-link-type=dfn href=#c title=c>c</a> is not the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, run these
  substeps:

  <ol>
   <li><p>If <var>piece pointer</var> is eight,
   <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

   <li>
    <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>:</code>", run these inner
    substeps:

    <ol>
     <li><p>If <var>compress pointer</var> is not null,
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

     <li>Increase <var>pointer</var> and <var>piece pointer</var> by one, set
     <var>compress pointer</var> to <var>piece pointer</var>,
     and then jump to <a data-link-type=dfn href=#concept-ipv6-parser-main title="IPv6 parser Main">Main</a>.
    </ol>

   <li><p>Let <var>value</var> and <var>length</var> be 0.

   <li><p>While <var>length</var> is less than 4 and
   <a data-link-type=dfn href=#c title=c>c</a> is an
   <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digit</a>, set
   <var>value</var> to
   <var>value</var> × 0x10 + <a data-link-type=dfn href=#c title=c>c</a> interpreted as hexadecimal number,
   and increase <var>pointer</var> and <var>length</var> by one.

   <li>
    <p>Based on <a data-link-type=dfn href=#c title=c>c</a>:

    <dl class=switch>
     <dt>"<code>.</code>"
     <dd>
      <p>If <var>length</var> is 0, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>,
      return failure.
      <p>Decrease <var>pointer</var> by <var>length</var>.
      <p>Jump to <a data-link-type=dfn href=#concept-ipv6-parser-ipv4 title="IPv6 parser IPv4">IPv4</a>.

     <dt>"<code>:</code>"
     <dd>
      <p>Increase <var>pointer</var> by one.
      <p>If <a data-link-type=dfn href=#c title=c>c</a> is the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>,
      <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

     <dt>Anything but the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>
     <dd><p><a data-link-type=dfn href=#parse-error title="Parse error">Parse error</a>, return failure.
    </dl>

   <li><p>Set <var>piece</var> to <var>value</var>.

   <li><p>Increase <var>piece pointer</var> by one.
  </ol>

 <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, jump to
 <a data-link-type=dfn href=#concept-ipv6-parser-finale title="IPv6 parser Finale">Finale</a>.

 <li><p><dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6-parser-ipv4 title="IPv6 parser IPv4">IPv4<a class=self-link href=#concept-ipv6-parser-ipv4></a></dfn>:
 If <var>piece pointer</var> is greater than six,
 <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

 <li><p>Let <var>dots seen</var> be 0.

 <li>
  <p>While <a data-link-type=dfn href=#c title=c>c</a> is not the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, run
  these substeps:

  <ol>
   <li><p>Let <var>value</var> be null.

   <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is not an <a data-link-type=dfn href=#ascii-digits title="ASCII digits">ASCII digit</a>,
   <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure. 

   <li>
    <p>While <a data-link-type=dfn href=#c title=c>c</a> is an
    <a data-link-type=dfn href=#ascii-digits title="ASCII digits">ASCII digit</a>, run these subsubsteps:

    <ol>
     <li><p>Let <var>number</var> be <a data-link-type=dfn href=#c title=c>c</a> interpreted as decimal number.

     <li>
      <p>If <var>value</var> is null, set <var>value</var> to <var>number</var>.

      <p>Otherwise, if <var>value</var> is 0, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

      <p>Otherwise, set <var>value</var> to <var>value</var> × 10 + <var>number</var>.

     <li><p>Increase <var>pointer</var> by one.

     <li><p>If <var>value</var> is greater than 255, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>,
     return failure.
    </ol>

   <li><p>If <var>dots seen</var> is less than 3 and
   <a data-link-type=dfn href=#c title=c>c</a> is not a "<code>.</code>",
   <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

   <li><p>Set <var>piece</var> to
   <var>piece</var> × 0x100 + <var>value</var>.

   <li><p>If <var>dots seen</var> is 1 or 3, increase
   <var>piece pointer</var> by one.

   <li><p>Increase <var>pointer</var> by one.

   <li><p>If <var>dots seen</var> is 3 and <a data-link-type=dfn href=#c title=c>c</a> is not
   the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>,
   <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

   <li><p>Increase <var>dots seen</var> by one.
  </ol>

 <li>
  <p><dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6-parser-finale title="IPv6 parser Finale">Finale<a class=self-link href=#concept-ipv6-parser-finale></a></dfn>:
  If <var>compress pointer</var> is not null, run these substeps:

  <ol>
   <li><p>Let <var>swaps</var> be
   <var>piece pointer</var> − <var>compress pointer</var>.

   <li><p>Set <var>piece pointer</var> to seven.

   <li><p>While <var>piece pointer</var> is not zero and <var>swaps</var> is
   greater than zero, swap <var>piece</var> with the
   <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">piece</a> at pointer
   <var>compress pointer</var> + <var>swaps</var> − 1, and then
   decrease both <var>piece pointer</var> and <var>swaps</var> by one.
  </ol>

 <li><p>Otherwise, if <var>compress pointer</var> is null and
 <var>piece pointer</var> is not eight, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>,
 return failure.

 <li><p>Return <var>address</var>.
</ol>


<h3 class="heading settled" data-level=3.4 id=host-serializing><span class=secno>3.4. </span><span class=content>Host serializing</span><a class=self-link href=#host-serializing></a></h3>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-host-serializer>host serializer<a class=self-link href=#concept-host-serializer></a></dfn> takes null or a
<a data-link-type=dfn href=#concept-host title=host>host</a> <var>host</var> and then runs
these steps:

<ol>
 <li><p>If <var>host</var> is null, return the empty string.

 <li><p>If <var>host</var> is an
 <a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a>, return
 "<code>[</code>", followed by the result of running the
 <a data-link-type=dfn href=#concept-ipv6-serializer title="IPv6 serializer">IPv6 serializer</a> on <var>host</var>,
 followed by "<code>]</code>".

 <li><p>Otherwise, <var>host</var> is a <a data-link-type=dfn href=#concept-domain title=domain>domain</a>,
 return <var>host</var>.
</ol>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-ipv6-serializer>IPv6 serializer<a class=self-link href=#concept-ipv6-serializer></a></dfn> takes an
<a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a> <var>address</var> and
then runs these steps:

<ol>
 <li><p>Let <var>output</var> be the empty string.

 <li>
  <p>Let <var>compress pointer</var> be a pointer to the first
  <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit piece</a> in the first longest
  sequences of <var>address</var>’s
  <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit pieces</a> that are 0.

  <p class=example>In <code>0:f:0:0:f:f:0:0</code> it would point to
  the second 0.

 <li><p>If there is no sequence of <var>address</var>’s
 <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">16-bit pieces</a> that are 0 longer than
 one, set <var>compress pointer</var> to null.

 <li>
  <p>For each <var>piece</var> in <var>address</var>’s
  <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">pieces</a>, run these substeps:

  <ol>
   <li><p>If <var>compress pointer</var> points to
   <var>piece</var>, append "<code>::</code>" to
   <var>output</var> if <var>piece</var> is
   <var>address</var>’s first <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">piece</a> and append
   "<code>:</code>" otherwise, and then run these substeps again with all
   subsequent <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">pieces</a> in
   <var>address</var>’s <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">pieces</a>
   that are 0 skipped or go the next step in the overall set of steps if
   that leaves no <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">pieces</a>.

   <li><p>Append <var>piece</var>, represented as the shortest
   possible lowercase hexadecimal number, to <var>output</var>.

   <li><p>If <var>piece</var> is not
   <var>address</var>’s last <a data-link-type=dfn href=#concept-ipv6-piece title="IPv6 piece">piece</a>,
   append "<code>:</code>" to <var>output</var>.
  </ol>

 <li><p>Return <var>output</var>.
</ol>

<p class=note role=note>This algorithm requires the recommendation from
A Recommendation for IPv6 Address Text Representation.
<a data-biblio-type=informative data-link-type=biblio href=#biblio-rfc5952 title=RFC5952>[RFC5952]</a>





<h2 class="heading settled" data-level=4 id=urls><span class=secno>4. </span><span class=content>URLs</span><a class=self-link href=#urls></a></h2>



<p>A <dfn data-dfn-type=dfn data-noexport="" id=concept-url>URL<a class=self-link href=#concept-url></a></dfn> is a universal identifier.

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a> consists of components, namely a
<a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>,
<a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>,
<a data-link-type=dfn href=#concept-url-username title="URL username">username</a>,
<a data-link-type=dfn href=#concept-url-password title="URL password">password</a>,
<a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
<a data-link-type=dfn href=#concept-url-port title="URL port">port</a>,
<a data-link-type=dfn href=#concept-url-path title="URL path">path</a>,
<a data-link-type=dfn href=#concept-url-query title="URL query">query</a>, and
<a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a>.

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-scheme title="URL scheme">scheme<a class=self-link href=#concept-url-scheme></a></dfn> is
a string that identifies the type of <a data-link-type=dfn href=#concept-url title=URL>URL</a> and can be used to
dispatch a <a data-link-type=dfn href=#concept-url title=URL>URL</a> for further processing after
<a data-link-type=dfn href=#concept-url-parser title="URL parser">parsing</a>. It is initially the empty string.

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s
<dfn data-dfn-type=dfn data-noexport="" id=concept-url-scheme-data title="URL scheme data">scheme data<a class=self-link href=#concept-url-scheme-data></a></dfn> is a string holding the contents of a
<a data-link-type=dfn href=#concept-url title=URL>URL</a>. It is initially the empty string.

<p class="note no-backref" role=note>A <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s
<a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a> will be its initial value if its
<a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is a <a data-link-type=dfn href=#relative-scheme title="relative scheme">relative scheme</a>, and
otherwise will be the only component without an initial value.

<p>A  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-username title="URL username">username<a class=self-link href=#concept-url-username></a></dfn>
is a string identifying a user. It is initially the empty string.

<p>A  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-password title="URL password">password<a class=self-link href=#concept-url-password></a></dfn>
is either null or a string identifying a user’s credentials. It is initially null.

<p>A  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-host title="URL host">host<a class=self-link href=#concept-url-host></a></dfn> is
either null or a <a data-link-type=dfn href=#concept-host title=host>host</a>. It is initially null.

<p>A  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-port title="URL port">port<a class=self-link href=#concept-url-port></a></dfn> is a
string that identifies a networking port. It is initially the empty string.

<p>A  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-path title="URL path">path<a class=self-link href=#concept-url-path></a></dfn> is a
list of zero or more strings holding data, usually identifying a location in hierarchical
form. It is initially the empty list.

<p>A  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-query title="URL query">query<a class=self-link href=#concept-url-query></a></dfn> is
either null or a string holding data. It is initially null.

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-fragment title="URL fragment">fragment<a class=self-link href=#concept-url-fragment></a></dfn>
is either null or a string holding data that can be used for further processing on the
resource the <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s other components identify.
It is initially null.

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a> also has an associated <dfn data-dfn-type=dfn data-noexport="" id=relative-flag>relative flag<a class=self-link href=#relative-flag></a></dfn>.
It is initially unset.

<p class="note no-backref" role=note>The <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> exists as checking if a
<a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is a
<a data-link-type=dfn href=#relative-scheme title="relative scheme">relative scheme</a> can give incorrect results due to the
<code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-protocol title=protocol>protocol</a></code> attribute.


<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a> also has an associated
<dfn data-dfn-type=dfn data-noexport="" id=concept-url-object title="URL object">object<a class=self-link href=#concept-url-object></a></dfn> that is either null or a
<code><a data-link-type=dfn href=http://dev.w3.org/2006/webapi/FileAPI/#blob title=Blob>Blob</a></code>. It is initially null.
<a data-biblio-type=normative data-link-type=biblio href=#biblio-fileapi title=FILEAPI>[FILEAPI]</a>

<p class=note role=note>At this point this is used primarily to support "<code>blob</code>"
URLs, but others can be added going forward, hence "object".


<p>A <dfn data-dfn-type=dfn data-noexport="" id=relative-scheme>relative scheme<a class=self-link href=#relative-scheme></a></dfn> is a
<a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> listed in the first column of
the following table. A <dfn data-dfn-type=dfn data-noexport="" id=default-port>default port<a class=self-link href=#default-port></a></dfn> is a
<a data-link-type=dfn href=#relative-scheme title="relative scheme">relative scheme</a>’s optional corresponding
<a data-link-type=dfn href=#concept-url-port title="URL port">port</a> and is listed in the second column
on the same row.

<table>
 <tr><th><a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>
     <th><a data-link-type=dfn href=#concept-url-port title="URL port">port</a>
 <tr><td>"<code>ftp</code>"<td>"<code>21</code>"
 <tr><td>"<code>file</code>"<td>
 <tr><td>"<code>gopher</code>"<td>"<code>70</code>"
 <tr><td>"<code>http</code>"<td>"<code>80</code>"
 <tr><td>"<code>https</code>"<td>"<code>443</code>"
 <tr><td>"<code>ws</code>"<td>"<code>80</code>"
 <tr><td>"<code>wss</code>"<td>"<code>443</code>"
</table>

<p></p>

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a>
<dfn data-dfn-type=dfn data-noexport="" id=include-credentials title="include credentials">includes credentials<a class=self-link href=#include-credentials></a></dfn> if either its
<a data-link-type=dfn href=#concept-url-username title="URL username">username</a> is not the empty string or its
<a data-link-type=dfn href=#concept-url-password title="URL password">password</a> is non-null.


<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a> can be designated as
<dfn data-dfn-type=dfn data-noexport="" id=concept-base-url>base URL<a class=self-link href=#concept-base-url></a></dfn>.

<p class="note no-backref" role=note>A <a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> is useful for
the <a data-link-type=dfn href=#concept-url-parser title="URL parser">URL parser</a> when the input is potentially a
<a data-link-type=dfn href=#concept-relative-url title="relative URL">relative URL</a>.


<h3 class="heading settled" data-level=4.1 id=url-writing><span class=secno>4.1. </span><span class=content>URL writing</span><a class=self-link href=#url-writing></a></h3>



<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a> must be written as either a
<a data-link-type=dfn href=#concept-relative-url title="relative URL">relative URL</a> or an
<a data-link-type=dfn href=#concept-absolute-url title="absolute URL">absolute URL</a>, optionally followed by
"<code>#</code>" and a
<a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a>.

<p>An <dfn data-dfn-type=dfn data-noexport="" id=concept-absolute-url>absolute URL<a class=self-link href=#concept-absolute-url></a></dfn> must be a
<a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>, followed by
"<code>:</code>", followed by either a
<a data-link-type=dfn href=#concept-scheme-relative-url title="scheme-relative URL">scheme-relative URL</a>, if
<a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is a <a data-link-type=dfn href=#relative-scheme title="relative scheme">relative scheme</a>, or
<a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a> otherwise, optionally followed
by "<code>?</code>" and a <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>.

<p>A <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> must be one
<a data-link-type=dfn href=#ascii-alpha title="ASCII alpha">ASCII alpha</a>, followed by zero or more of
<a data-link-type=dfn href=#ascii-alphanumeric title="ASCII alphanumeric">ASCII alphanumeric</a>, "<code>+</code>",
"<code>-</code>", and "<code>.</code>". A
<a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> must be registered
<span class=XXX>...</span>.

<p>The syntax of <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>
depends on the <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> and is typically
defined alongside it. Standards must define
<a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a> within the constraints of zero or
more <a data-link-type=dfn href=#url-units title="URL units">URL units</a>.

<p>A <dfn data-dfn-type=dfn data-noexport="" id=concept-relative-url>relative URL<a class=self-link href=#concept-relative-url></a></dfn> must be either a
<a data-link-type=dfn href=#concept-scheme-relative-url title="scheme-relative URL">scheme-relative URL</a>, an
<a data-link-type=dfn href=#concept-absolute-path-relative-url title="absolute-path-relative URL">absolute-path-relative URL</a>,
or a <a data-link-type=dfn href=#concept-path-relative-url title="path-relative URL">path-relative URL</a> that
does not start with a <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> and
"<code>:</code>", optionally followed by a "<code>?</code>" and
a <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>.

<p>At the point where a <a data-link-type=dfn href=#concept-relative-url title="relative URL">relative URL</a> is
<a data-link-type=dfn href=#concept-url-parser title="URL parser">parsed</a>, a
<a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> must be in scope.

<p>A <dfn data-dfn-type=dfn data-noexport="" id=concept-scheme-relative-url>scheme-relative URL<a class=self-link href=#concept-scheme-relative-url></a></dfn> must be
"<code>//</code>", optionally followed by
<a data-link-type=dfn href=#concept-url-userinfo title="URL Userinfo">userinfo</a> and "<code>@</code>",
followed by a <a data-link-type=dfn href=#concept-host title=host>host</a>, optionally followed
by "<code>:</code>" and a <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>,
optionally followed by an
<a data-link-type=dfn href=#concept-absolute-path-relative-url title="absolute-path-relative URL">absolute-path-relative URL</a>.

<p><dfn data-dfn-type=dfn data-noexport="" id=concept-url-userinfo title="URL Userinfo">Userinfo<a class=self-link href=#concept-url-userinfo></a></dfn> must be a
<a data-link-type=dfn href=#concept-url-username title="URL username">username</a>, optionally followed by a
"<code>:</code>" and a
<a data-link-type=dfn href=#concept-url-password title="URL password">password</a>.

<p>A <a data-link-type=dfn href=#concept-url-username title="URL username">username</a> must be zero or more
<a data-link-type=dfn href=#url-units title="URL units">URL units</a>, excluding "<code>/</code>",
"<code>:</code>, "<code>?</code>", and "<code>@</code>".


<p>A <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> must be zero or more
<a data-link-type=dfn href=#url-units title="URL units">URL units</a>, excluding "<code>/</code>",
"<code>?</code>", and "<code>@</code>".

<p>A <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> must be zero or more
<a data-link-type=dfn href=#ascii-digits title="ASCII digits">ASCII digits</a>.

<p>An
<dfn data-dfn-type=dfn data-noexport="" id=concept-absolute-path-relative-url>absolute-path-relative URL<a class=self-link href=#concept-absolute-path-relative-url></a></dfn>
must be "<code>/</code>", followed by a
<a data-link-type=dfn href=#concept-path-relative-url title="path-relative URL">path-relative URL</a> that does not
start with "<code>/</code>".

<p>A <dfn data-dfn-type=dfn data-noexport="" id=concept-path-relative-url>path-relative URL<a class=self-link href=#concept-path-relative-url></a></dfn> must be zero or
more <a data-link-type=dfn href=#path-segment title="path segment">path segments</a> separated from each
other by a "<code>/</code>".

<p>A <dfn data-dfn-type=dfn data-noexport="" id=path-segment>path segment<a class=self-link href=#path-segment></a></dfn> must be zero or more <a data-link-type=dfn href=#url-units title="URL units">URL units</a>,
excluding "<code>/</code>" and "<code>?</code>".

<p>A <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> must be zero or more
<a data-link-type=dfn href=#url-units title="URL units">URL units</a>.

<p>A <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> must be zero or more
<a data-link-type=dfn href=#url-units title="URL units">URL units</a>.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=url-code-points>URL code points<a class=self-link href=#url-code-points></a></dfn> are <a data-link-type=dfn href=#ascii-alphanumeric title="ASCII alphanumeric">ASCII alphanumeric</a>,
"<code>!</code>",
"<code>$</code>",
"<code>&amp;</code>",
"<code>'</code>",
"<code>(</code>",
"<code>)</code>",
"<code>*</code>",
"<code>+</code>",
"<code>,</code>",
"<code>-</code>",
"<code>.</code>",
"<code>/</code>",
"<code>:</code>",
"<code>;</code>",
"<code>=</code>",
"<code>?</code>",
"<code>@</code>",
"<code>_</code>",
"<code>~</code>",
and code points in the ranges
U+00A0 to U+D7FF,
U+E000 to U+FDCF,
U+FDF0 to U+FFFD,
U+10000 to U+1FFFD,
U+20000 to U+2FFFD,
U+30000 to U+3FFFD,
U+40000 to U+4FFFD,
U+50000 to U+5FFFD,
U+60000 to U+6FFFD,
U+70000 to U+7FFFD,
U+80000 to U+8FFFD,
U+90000 to U+9FFFD,
U+A0000 to U+AFFFD,
U+B0000 to U+BFFFD,
U+C0000 to U+CFFFD,
U+D0000 to U+DFFFD,
U+E0000 to U+EFFFD,
U+F0000 to U+FFFFD,
U+100000 to U+10FFFD.

<p class=note role=note>Code points higher than U+009F will be converted to
<a data-link-type=dfn href=#percent-encoded-byte title="percent-encoded byte">percent-encoded bytes</a> by the
<a data-link-type=dfn href=#concept-url-parser title="URL parser">URL parser</a>.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=url-units>URL units<a class=self-link href=#url-units></a></dfn> are <a data-link-type=dfn href=#url-code-points title="URL code points">URL code points</a> and
<a data-link-type=dfn href=#percent-encoded-byte title="percent-encoded byte">percent-encoded bytes</a>.


<h3 class="heading settled" data-level=4.2 id=url-parsing><span class=secno>4.2. </span><span class=content>URL parsing</span><a class=self-link href=#url-parsing></a></h3>

<p class=XXX>Add the ability to halt on the first conformance error.

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-url-parser>URL parser<a class=self-link href=#concept-url-parser></a></dfn> takes a string
<var>input</var>, optionally with a
<a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> <var>base</var>, and
optionally with an <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encoding>encoding</a>
<var>encoding override</var>, and then runs these steps:

<ol>
 <li><p>Let <var>url</var> be the result of running the
 <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">basic URL parser</a> on <var>input</var>
 with <var>base</var>, and <var>encoding override</var> as provided.

 <li><p>If <var>url</var> is failure, return failure.

 <li><p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is not
 "<code>blob</code>", return <var>url</var>.

 <li><p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>
 is not in the <a data-link-type=dfn href=http://dev.w3.org/2006/webapi/FileAPI/#BlobURLStore title="blob URL store">blob URL store</a>, return
 <var>url</var>. <a data-biblio-type=normative data-link-type=biblio href=#biblio-fileapi title=FILEAPI>[FILEAPI]</a>

 <li><p>Set <var>url</var>’s <a data-link-type=dfn href=#concept-url-object title="URL object">object</a> to a
 <a data-link-type=dfn href=https://html.spec.whatwg.org/multipage/infrastructure.html#structured-clone title="structured clone">structured clone</a> of the entry in the
 <a data-link-type=dfn href=http://dev.w3.org/2006/webapi/FileAPI/#BlobURLStore title="blob URL store">blob URL store</a> corresponding to
 <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>.
 <a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>

 <li><p>Return <var>url</var>.
</ol>

<hr>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-basic-url-parser>basic URL parser<a class=self-link href=#concept-basic-url-parser></a></dfn> takes a string
<var>input</var>, optionally with a
<a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> <var>base</var>,
optionally with an <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encoding>encoding</a>
<var>encoding override</var>, optionally with an
<a data-link-type=dfn href=#concept-url title=URL>URL</a> <var>url</var> and a state override
<var>state override</var>, and then runs these steps:

<div class="note no-backref" role=note>
 <p>The <var>encoding override</var> argument is a legacy concept only relevant for
 HTML. The <var>url</var> and <var>state override</var> arguments are only for
 use by methods of objects implementing the <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> interface.
 <a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>

 <p>When the <var>url</var> and <var>state override</var> arguments are not
 passed the <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">basic URL parser</a> returns either a
 <a data-link-type=dfn href=#concept-url title=URL>URL</a> or failure. If they are passed the
 algorithm simply modifies the passed <var>url</var> and can terminate without
 returning anything.
</div>

<ol>
 <li>
  <p>If <var>url</var> is not given:

  <ol>
   <li><p>Set <var>url</var> to a new <a data-link-type=dfn href=#concept-url title=URL>URL</a>.

   <li><p>Remove any leading and trailing
   <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#ascii-whitespace title="ASCII whitespace">ASCII whitespace</a> from
   <var>input</var>.
  </ol>

 <li><p>Let <var>state</var> be <var>state override</var>
 if given, or <a data-link-type=dfn href=#scheme-start-state title="scheme start state">scheme start state</a> otherwise.

 <li><p>If <var>base</var> is not given, set it to null.

 <li><p>If <var>encoding override</var> is not given, set it to
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a>.

 <li><p>Let <var>buffer</var> be the empty string.

 <li><p>Let the <var>@ flag</var> and the <var>[] flag</var> be
 unset.

 <li><p>Let <var>pointer</var> be a pointer to first code point in
 <var>input</var>.

 <li>
  <p>Keep running the following state machine by switching on <var>state</var>. If
  after a run <var>pointer</var> points to the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, go to
  the next step. Otherwise, increase <var>pointer</var> by one and continue with the
  state machine.

  <dl class=switch>
   <dt><dfn data-dfn-type=dfn data-noexport="" id=scheme-start-state>scheme start state<a class=self-link href=#scheme-start-state></a></dfn>
   <dd>
    <ol>
     <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is an <a data-link-type=dfn href=#ascii-alpha title="ASCII alpha">ASCII alpha</a>,
     append <a data-link-type=dfn href=#c title=c>c</a>, lowercased, to <var>buffer</var>, and
     set <var>state</var> to <a data-link-type=dfn href=#scheme-state title="scheme state">scheme state</a>.

     <li><p>Otherwise, if <var>state override</var> is not given, set
     <var>state</var> to <a data-link-type=dfn href=#no-scheme-state title="no scheme state">no scheme state</a>, and decrease
     <var>pointer</var> by one.

     <li><p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, terminate this algorithm.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=scheme-state>scheme state<a class=self-link href=#scheme-state></a></dfn>
   <dd>
    <ol>
     <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is an <a data-link-type=dfn href=#ascii-alphanumeric title="ASCII alphanumeric">ASCII alphanumeric</a>,
     "<code>+</code>", "<code>-</code>", or
     "<code>.</code>", append <a data-link-type=dfn href=#c title=c>c</a>, lowercased, to
     <var>buffer</var>.

     <li>
      <p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is "<code>:</code>", set
      <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> to
      <var>buffer</var>, <var>buffer</var> to the empty string,
      and then run these substeps:

      <ol>
       <li><p>If <var>state override</var> is given,
       terminate this algorithm.

       <li><p>If <var>url</var>’s
       <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is
       a <a data-link-type=dfn href=#relative-scheme title="relative scheme">relative scheme</a>, set <var>url</var>’s
       <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a>.

       <li><p>If <var>url</var>’s
       <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is
       "<code>file</code>", set <var>state</var> to
       <a data-link-type=dfn href=#relative-state title="relative state">relative state</a>.

       <li><p>Otherwise, if <var>url</var>’s
       <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is set, <var>base</var> is not null
       and <var>base</var>’s
       <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is equal to
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>,
       set <var>state</var> to
       <a data-link-type=dfn href=#relative-or-authority-state title="relative or authority state">relative or authority state</a>.

       <li><p>Otherwise, if <var>url</var>’s
       <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is set, set <var>state</var> to
       <a data-link-type=dfn href=#authority-first-slash-state title="authority first slash state">authority first slash state</a>.

       <li><p>Otherwise, set <var>state</var> to
       <a data-link-type=dfn href=#scheme-data-state title="scheme data state">scheme data state</a>.
      </ol>

     <li><p>Otherwise, if <var>state override</var> is not given, set
     <var>buffer</var> to the empty string, <var>state</var> to
     <a data-link-type=dfn href=#no-scheme-state title="no scheme state">no scheme state</a>, and start over (from the first code point
     in <var>input</var>).

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is the
     <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, terminate this algorithm.
     

     <li><p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, terminate this algorithm.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=scheme-data-state>scheme data state<a class=self-link href=#scheme-data-state></a></dfn>
   <dd>
    <ol>
     <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>?</code>", set
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>
     to the empty string and <var>state</var> to
     <a data-link-type=dfn href=#query-state title="query state">query state</a>.

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is "<code>#</code>", set
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a>
     to the empty string and <var>state</var> to
     <a data-link-type=dfn href=#fragment-state title="fragment state">fragment state</a>.

     <li>
      <p>Otherwise, run these substeps:

      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is not the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, not a
       <a data-link-type=dfn href=#url-code-points title="URL code points">URL code point</a>, and not
       "<code>%</code>", <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>%</code>" and <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does
       not start with two <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digits</a>, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is none of
       <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, U+0009, U+000A, and U+000D,
       <a data-link-type=dfn href=#utf-8-percent-encode title="utf-8 percent encode">utf-8 percent encode</a> <a data-link-type=dfn href=#c title=c>c</a> using the
       <a data-link-type=dfn href=#simple-encode-set title="simple encode set">simple encode set</a>, and append the result to
       <var>url</var>’s
       <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>.
      </ol>
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=no-scheme-state>no scheme state<a class=self-link href=#no-scheme-state></a></dfn>
   <dd>
    <p>If <var>base</var> is null, or <var>base</var>’s
    <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is not a
    <a data-link-type=dfn href=#relative-scheme title="relative scheme">relative scheme</a>, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.

    <p class=note role=note>Due to the <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-protocol title=protocol>protocol</a></code> attribute’s
    ability to change <var>base</var>’s
    <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>, <var>base</var>’s
    <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is not used here.

    <p>Otherwise, set <var>state</var> to <a data-link-type=dfn href=#relative-state title="relative state">relative state</a>,
    and decrease <var>pointer</var> by one.

   <dt><dfn data-dfn-type=dfn data-noexport="" id=relative-or-authority-state>relative or authority state<a class=self-link href=#relative-or-authority-state></a></dfn>
   <dd>
    <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>/</code>" and
    <a data-link-type=dfn href=#remaining title=remaining>remaining</a> starts with "<code>/</code>", set
    <var>state</var> to <a data-link-type=dfn href=#authority-ignore-slashes-state title="authority ignore slashes state">authority ignore slashes state</a>
    and increase <var>pointer</var> by one.

    <p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, set <var>state</var> to
    <a data-link-type=dfn href=#relative-state title="relative state">relative state</a> and decrease <var>pointer</var> by
    one.

   <dt><dfn data-dfn-type=dfn data-noexport="" id=relative-state>relative state<a class=self-link href=#relative-state></a></dfn>
   <dd>
    <p>Set <var>url</var>’s <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a>, set
    <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> to
    <var>base</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> if
    <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is not
    "<code>file</code>", and then, based on <a data-link-type=dfn href=#c title=c>c</a>:

    <dl class=switch>
     <dt><a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>
     <dd>
      <p>Set <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>
      to <var>base</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
      <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to
      <var>base</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>,
      <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a> to
      <var>base</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>, and
      <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to
      <var>base</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>.

     <dt>"<code>/</code>"
     <dt>"<code>\</code>"
     <dd>
      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>\</code>",
       <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.
       <li><p>Set <var>state</var> to
       <a data-link-type=dfn href=#relative-slash-state title="relative slash state">relative slash state</a>.
      </ol>

     <dt>"<code>?</code>"
     <dd><p>Set
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to the empty string,
     and <var>state</var> to <a data-link-type=dfn href=#query-state title="query state">query state</a>.

     <dt>"<code>#</code>"
     <dd><p>Set
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to
     <var>base</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>,
     <var>url</var>’s <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> to the empty string,
     and <var>state</var> to <a data-link-type=dfn href=#fragment-state title="fragment state">fragment state</a>.

     <dt>Otherwise
     <dd>
      <ol>
       <li>
        <p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is not
        "<code>file</code>", or <var>c</var> is not an
        <a data-link-type=dfn href=#ascii-alpha title="ASCII alpha">ASCII alpha</a>, or <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does not start with either
        "<code>:</code>" or "<code>|</code>", or <a data-link-type=dfn href=#remaining title=remaining>remaining</a>
        consists of one code point, or <a data-link-type=dfn href=#remaining title=remaining>remaining</a>’s second code point is
        not one of "<code>/</code>", "<code>\</code>", "<code>?</code>",
        and "<code>#</code>", then set
        <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
        <var>base</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
        <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to
        <var>base</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>,
        <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a> to
        <var>base</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>, and then remove
        <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>’s last entry.
        

        <p class=note role=note>This is a (platform-independent) Windows drive letter quirk.
        When found at the start of a <code>file</code> URL it is treated as an
        absolute path rather than one relative to
        <var>base</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>.

       <li><p>Set <var>state</var> to <a data-link-type=dfn href=#relative-path-state title="relative path state">relative path state</a>,
       and decrease <var>pointer</var> by one.
      </ol>
    </dl>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=relative-slash-state>relative slash state<a class=self-link href=#relative-slash-state></a></dfn>
   <dd>
    <p>If <a data-link-type=dfn href=#c title=c>c</a> is either "<code>/</code>" or
    "<code>\</code>", run these steps:

    <ol>
     <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>\</code>",
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li><p>If <var>url</var>’s
     <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is
     "<code>file</code>", set <var>state</var> to
     <a data-link-type=dfn href=#file-host-state title="file host state">file host state</a>.

     <li><p>Otherwise, set <var>state</var> to
     <a data-link-type=dfn href=#authority-ignore-slashes-state title="authority ignore slashes state">authority ignore slashes state</a>.
    </ol>

    <p>Otherwise, run these steps:

    <ol>
     <li>
      <p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is not
      "<code>file</code>", set
      <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
      <var>base</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> and
      <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to
      <var>base</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>.

      <p class="example no-backref"><code>file:/path/</code> will not inherit
      <var>base</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>.

     <li><p>Set <var>state</var> to <a data-link-type=dfn href=#relative-path-state title="relative path state">relative path state</a>,
     and decrease <var>pointer</var> by one.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=authority-first-slash-state>authority first slash state<a class=self-link href=#authority-first-slash-state></a></dfn>
   <dd>
    <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>/</code>", set
    <var>state</var> to <a data-link-type=dfn href=#authority-second-slash-state title="authority second slash state">authority second slash state</a>.

    <p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, set <var>state</var> to
    <a data-link-type=dfn href=#authority-ignore-slashes-state title="authority ignore slashes state">authority ignore slashes state</a>, and decrease
    <var>pointer</var> by one.

   <dt><dfn data-dfn-type=dfn data-noexport="" id=authority-second-slash-state>authority second slash state<a class=self-link href=#authority-second-slash-state></a></dfn>
   <dd>
    <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>/</code>", set
    <var>state</var> to <a data-link-type=dfn href=#authority-ignore-slashes-state title="authority ignore slashes state">authority ignore slashes state</a>.

    <p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, set <var>state</var> to
    <a data-link-type=dfn href=#authority-ignore-slashes-state title="authority ignore slashes state">authority ignore slashes state</a>, and decrease
    <var>pointer</var> by one.

   <dt><dfn data-dfn-type=dfn data-noexport="" id=authority-ignore-slashes-state>authority ignore slashes state<a class=self-link href=#authority-ignore-slashes-state></a></dfn>
   <dd>
    <p>If <a data-link-type=dfn href=#c title=c>c</a> is neither "<code>/</code>" nor
    "<code>\</code>", set <var>state</var> to
    <a data-link-type=dfn href=#authority-state title="authority state">authority state</a>, and decrease <var>pointer</var> by one.

    <p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

   <dt><dfn data-dfn-type=dfn data-noexport="" id=authority-state>authority state<a class=self-link href=#authority-state></a></dfn>
   <dd>
    <ol>
     <li>
      <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>@</code>", run these substeps:

      <ol>
       <li><p>If the <var>@ flag</var> is set,
       <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, prepend "<code>%40</code>" to
       <var>buffer</var>.

       <li><p>Set the <var>@ flag</var>.

       <li>
        <p>For each <var>code point</var> in <var>buffer</var>, run these substeps:

        <ol>
         <li><p>If <var>code point</var> is U+0009, U+000A, or U+000D,
         <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, continue.

         <li><p>If <var>code point</var> is not a
         <a data-link-type=dfn href=#url-code-points title="URL code points">URL code point</a> and not
         "<code>%</code>", <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

         <li><p>If <var>code point</var> is "<code>%</code>" and
         <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does not start with two
         <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digits</a>, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

         <li><p>If <var>code point</var> is "<code>:</code>" and
         <var>url</var>’s
         <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> is null, set
         <var>url</var>’s <a data-link-type=dfn href=#concept-url-password title="URL password">password</a>
         to the empty string and continue.

         <li><p><a data-link-type=dfn href=#utf-8-percent-encode title="utf-8 percent encode">utf-8 percent encode</a> <var>code point</var> using
         the <a data-link-type=dfn href=#default-encode-set title="default encode set">default encode set</a> and append the result to
         <var>url</var>’s <a data-link-type=dfn href=#concept-url-password title="URL password">password</a>
         if <var>url</var>’s <a data-link-type=dfn href=#concept-url-password title="URL password">password</a>
         is non-null, and to
         <var>url</var>’s <a data-link-type=dfn href=#concept-url-username title="URL username">username</a>
         otherwise.
        </ol>
       <li><p>Set <var>buffer</var> to the empty string.
      </ol>

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is one of <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>,
     "<code>/</code>", "<code>\</code>", "<code>?</code>",
     and "<code>#</code>", decrease <var>pointer</var> by the
     number of code points in <var>buffer</var> plus one, set
     <var>buffer</var> to the empty string, and
     <var>state</var> to <a data-link-type=dfn href=#host-state title="host state">host state</a>.

     <li><p>Otherwise, append <a data-link-type=dfn href=#c title=c>c</a> to <var>buffer</var>.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=file-host-state>file host state<a class=self-link href=#file-host-state></a></dfn>
   <dd>
    <ol>
     <li>
      <p>If <a data-link-type=dfn href=#c title=c>c</a> is one of <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>,
      "<code>/</code>", "<code>\</code>", "<code>?</code>",
      and "<code>#</code>", decrease <var>pointer</var> by one,
      and run these substeps:

      <ol>
       <li>
        <p>If <var>buffer</var> consists of two code points, of
        which the first is an <a data-link-type=dfn href=#ascii-alpha title="ASCII alpha">ASCII alpha</a> and the second is
        either "<code>:</code>" or "<code>|</code>", set
        <var>state</var> to <a data-link-type=dfn href=#relative-path-state title="relative path state">relative path state</a>.

        <p class=note role=note>This is a (platform-independent) Windows drive letter quirk.
        <var>buffer</var> is not reset here and instead used in the
        <a data-link-type=dfn href=#relative-path-state title="relative path state">relative path state</a>.

       <li><p>Otherwise, if <var>buffer</var> is the empty string, set
       <var>state</var> to <a data-link-type=dfn href=#relative-path-start-state title="relative path start state">relative path start state</a>.

       <li>
        <p>Otherwise, run these steps:

        <ol>
         <li><p>Let <var>host</var> be the result of
         <a data-link-type=dfn href=#concept-host-parser title="host parser">host parsing</a>
         <var>buffer</var>.

         <li><p>If <var>host</var> is failure, return failure.

         <li><p>Set
         <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
         <var>host</var>, <var>buffer</var> to the empty string,
         and <var>state</var> to <a data-link-type=dfn href=#relative-path-start-state title="relative path start state">relative path start state</a>.
        </ol>
      </ol>

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is U+0009, U+000A, or U+000D,
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li><p>Otherwise, append <a data-link-type=dfn href=#c title=c>c</a> to <var>buffer</var>.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=host-state>host state<a class=self-link href=#host-state></a></dfn>
   <dt><dfn data-dfn-type=dfn data-noexport="" id=hostname-state>hostname state<a class=self-link href=#hostname-state></a></dfn>
   <dd>
    <ol>
     <li>
      <p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>:</code>" and the
      <var>[] flag</var> is unset, run these substeps:

      <ol>
       <li><p>Let <var>host</var> be the result of
       <a data-link-type=dfn href=#concept-host-parser title="host parser">host parsing</a>
       <var>buffer</var>.

       <li><p>If <var>host</var> is failure, return failure.

       <li><p>Set <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
       <var>host</var>, <var>buffer</var> to the empty string,
       and <var>state</var> to <a data-link-type=dfn href=#port-state title="port state">port state</a>.

       <li><p>If <var>state override</var> is <a data-link-type=dfn href=#hostname-state title="hostname state">hostname state</a>,
       terminate this algorithm.
      </ol>

     <li>
      <p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is the
      <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, "<code>/</code>",
      "<code>\</code>", "<code>?</code>", or
      "<code>#</code>", decrease <var>pointer</var> by one, and
      run these substeps:

      <ol>
       <li><p>Let <var>host</var> be the result of
       <a data-link-type=dfn href=#concept-host-parser title="host parser">host parsing</a>
       <var>buffer</var>.

       <li><p>If <var>host</var> is failure, return failure.

       <li><p>Set <var>url</var>’s <a data-link-type=dfn href=#concept-url-host title="URL host">host</a> to
       <var>host</var>, <var>buffer</var> to the empty string,
       and <var>state</var> to <a data-link-type=dfn href=#relative-path-start-state title="relative path start state">relative path start state</a>.

       <li><p>If <var>state override</var> is given, terminate this
       algorithm.
      </ol>

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is U+0009, U+000A, or U+000D,
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li>
      <p>Otherwise, run these substeps:

      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>[</code>", set the
       <var>[] flag</var>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>]</code>", unset the
       <var>[] flag</var>.

       <li><p>Append <a data-link-type=dfn href=#c title=c>c</a> to <var>buffer</var>.
      </ol>
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=port-state>port state<a class=self-link href=#port-state></a></dfn>
   <dd>
    <ol>
     <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is an <a data-link-type=dfn href=#ascii-digits title="ASCII digits">ASCII digit</a>,
     append <a data-link-type=dfn href=#c title=c>c</a> to <var>buffer</var>.

     <li>
      <p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is one of
      <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, "<code>/</code>",
      "<code>\</code>", "<code>?</code>", and
      "<code>#</code>", or <var>state override</var> is given, run
      these substeps:
      <ol>
       <li>
        <p>Remove leading U+0030 code points from <var>buffer</var>
        until either the leading code point is not U+0030 or
        <var>buffer</var> is one code point.

        <div class=example>
        <table>
         <tr><th>Input<th>Output
         <tr><td>"<code>42</code>"<td>"<code>42</code>"
         <tr><td>"<code>031</code>"<td>"<code>31</code>"
         <tr><td>"<code>080</code>"<td>"<code>80</code>"
         <tr><td>"<code>0000</code>"<td>"<code>0</code>"
        </table>
        </div>

       <li><p>If <var>buffer</var> is equal to
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>’s
       <a data-link-type=dfn href=#default-port title="default port">default port</a>, set <var>buffer</var> to the empty
       string.

       <li><p>Set <var>url</var>’s
       <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to <var>buffer</var>.

       <li><p>If <var>state override</var> is given, terminate this
       algorithm.

       <li><p>Set <var>buffer</var> to the empty string,
       <var>state</var> to <a data-link-type=dfn href=#relative-path-start-state title="relative path start state">relative path start state</a>, and
       decrease <var>pointer</var> by one.
      </ol>

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is U+0009, U+000A, or U+000D,
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li><p>Otherwise, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>, return failure.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=relative-path-start-state>relative path start state<a class=self-link href=#relative-path-start-state></a></dfn>
   <dd>
    <ol>
     <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>\</code>",
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li><p>Set <var>state</var> to <a data-link-type=dfn href=#relative-path-state title="relative path state">relative path state</a>
     and if <a data-link-type=dfn href=#c title=c>c</a> is neither "<code>/</code>" nor
     "<code>\</code>", decrease <var>pointer</var> by one.
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=relative-path-state>relative path state<a class=self-link href=#relative-path-state></a></dfn>
   <dd>
    <ol>
     <li>
      <p>If either <a data-link-type=dfn href=#c title=c>c</a> is one of
      <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, "<code>/</code>", and
      "<code>\</code>", or <var>state override</var> is not given and
      <a data-link-type=dfn href=#c title=c>c</a> is one of "<code>?</code>" and
      "<code>#</code>", run these substeps:
      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>\</code>", <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li>
        <p>If <var>buffer</var>, lowercased, matches any row in the first column of
        the following table, set <var>buffer</var> to the contents of the cell in
        the second column of the matched row:

        <table>
         <tr><td>"<code>%2e</code>"   <td>"<code>.</code>"
         <tr><td>"<code>.%2e</code>"  <td rowspan=3>"<code>..</code>"
         <tr><td>"<code>%2e.</code>"
         <tr><td>"<code>%2e%2e</code>"
        </table>

       <li><p>If <var>buffer</var> is "<code>..</code>", remove
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>’s last entry, if
       any, and then if <a data-link-type=dfn href=#c title=c>c</a> is neither  "<code>/</code>" nor
       "<code>\</code>", append the empty string to <var>url</var>’s
       <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>.

       <li><p>Otherwise, if <var>buffer</var> is "<code>.</code>" and
       <a data-link-type=dfn href=#c title=c>c</a> is neither "<code>/</code>" nor "<code>\</code>",
       append an empty string to
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>.

       <li>
        <p>Otherwise, if <var>buffer</var> is not
        "<code>.</code>", run these subsubsteps:

        <ol>
         <li>
          <p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is
          "<code>file</code>", <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>
          is empty, <var>buffer</var> consists of two
          code points, of which the first is an <a data-link-type=dfn href=#ascii-alpha title="ASCII alpha">ASCII alpha</a>,
          and the second is "<code>|</code>", replace the second code point in
          <var>buffer</var> with "<code>:</code>".

          <p class=note role=note>This is a (platform-independent) Windows drive letter quirk.
          They are beautiful, no?

         <li><p>Append <var>buffer</var> to
         <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>.
        </ol>

       <li><p>Set <var>buffer</var> to the empty string.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>?</code>", set
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to the empty string,
       and <var>state</var> to <a data-link-type=dfn href=#query-state title="query state">query state</a>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>#</code>", set
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> to the empty string,
       and <var>state</var> to <a data-link-type=dfn href=#fragment-state title="fragment state">fragment state</a>.
      </ol>

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is U+0009, U+000A, or U+000D,
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li>
      <p>Otherwise, run these steps:

      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is not a
       <a data-link-type=dfn href=#url-code-points title="URL code points">URL code point</a> and not "<code>%</code>",
       <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>%</code>" and <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does
       not start with two <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digits</a>, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p><a data-link-type=dfn href=#utf-8-percent-encode title="utf-8 percent encode">utf-8 percent encode</a> <a data-link-type=dfn href=#c title=c>c</a> using the
       <a data-link-type=dfn href=#default-encode-set title="default encode set">default encode set</a>, and append the result to
       <var>buffer</var>.
      </ol>
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=query-state>query state<a class=self-link href=#query-state></a></dfn>
   <dd>
    <ol>
     <li>
      <p>If <a data-link-type=dfn href=#c title=c>c</a> is the <a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>, or
      <var>state override</var> is not given and <a data-link-type=dfn href=#c title=c>c</a>
      is "<code>#</code>", run these substeps:

      <ol>
       <li><p>If <var>url</var>’s <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset or
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is either
       "<code>ws</code>" or "<code>wss</code>", set
       <var>encoding override</var> to <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a>.
       

       <li><p>Set <var>buffer</var> to the result of
       <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encode>encoding</a>
       <var>buffer</var> using <var>encoding override</var>.

       <li>
        <p>For each <var>byte</var> in <var>buffer</var> run
        these subsubsteps:

        <ol>
         <li><p>If <var>byte</var> is less than 0x21, greater than
         0x7E, or is one of 0x22, 0x23, 0x3C, 0x3E, and 0x60, append
         <var>byte</var>,
         <a data-link-type=dfn href=#percent-encode title="percent encode">percent encoded</a>, to
         <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>.

         <li><p>Otherwise, append a code point whose value is
         <var>byte</var> to <var>url</var>’s
         <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>.
        </ol>

       <li><p>Set <var>buffer</var> to the empty string.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>#</code>", set
       <var>url</var>’s
       <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> to the empty string,
       and state to <a data-link-type=dfn href=#fragment-state title="fragment state">fragment state</a>.
      </ol>

     <li><p>Otherwise, if <a data-link-type=dfn href=#c title=c>c</a> is U+0009, U+000A, or U+000D,
     <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

     <li>
      <p>Otherwise, run these substeps:

      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is not a
       <a data-link-type=dfn href=#url-code-points title="URL code points">URL code point</a> and not "<code>%</code>",
       <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>%</code>" and <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does
       not start with two <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digits</a>, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p>Append <a data-link-type=dfn href=#c title=c>c</a> to <var>buffer</var>.
      </ol>
    </ol>

   <dt><dfn data-dfn-type=dfn data-noexport="" id=fragment-state>fragment state<a class=self-link href=#fragment-state></a></dfn>
   <dd>
    <p>Based on <a data-link-type=dfn href=#c title=c>c</a>:
    <dl class=switch>
     <dt><a data-link-type=dfn href=#eof-code-point title="EOF code point">EOF code point</a>
     <dd><p>Do nothing.

     <dt>U+0009
     <dt>U+000A
     <dt>U+000D
     <dd><p><a data-link-type=dfn href=#parse-error title="Parse error">Parse error</a>.

     <dt>Otherwise
     <dd>
      <ol>
       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is not a
       <a data-link-type=dfn href=#url-code-points title="URL code points">URL code point</a> and not
       "<code>%</code>", <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p>If <a data-link-type=dfn href=#c title=c>c</a> is "<code>%</code>" and <a data-link-type=dfn href=#remaining title=remaining>remaining</a> does
       not start with two <a data-link-type=dfn href=#ascii-hex-digits title="ASCII hex digits">ASCII hex digits</a>, <a data-link-type=dfn href=#parse-error title="parse error">parse error</a>.

       <li><p><a data-link-type=dfn href=#utf-8-percent-encode title="utf-8 percent encode">utf-8 percent encode</a> <a data-link-type=dfn href=#c title=c>c</a>
       using the <a data-link-type=dfn href=#simple-encode-set title="simple encode set">simple encode set</a>, and append the result to
       <var>url</var>’s <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a>.
       
      </ol>
    </dl>
  </dl>

 <li><p>Return <var>url</var>.
</ol>

<hr>

<p>To <dfn data-dfn-type=dfn data-noexport="" id=set-the-username>set the username<a class=self-link href=#set-the-username></a></dfn> given a <var>url</var> and
<var>username</var>, run these steps:

<ol>
 <li><p>Set <var>url</var>’s <a data-link-type=dfn href=#concept-url-username title="URL username">username</a> to the
 empty string.

 <li><p>For each code point in <var>username</var>,
 <a data-link-type=dfn href=#utf-8-percent-encode title="utf-8 percent encode">utf-8 percent encode</a> it using the <a data-link-type=dfn href=#username-encode-set title="username encode set">username encode set</a>, and
 append the result to <var>url</var>’s
 <a data-link-type=dfn href=#concept-url-username title="URL username">username</a>.
</ol>

<p>To <dfn data-dfn-type=dfn data-noexport="" id=set-the-password>set the password<a class=self-link href=#set-the-password></a></dfn> given a <var>url</var> and
<var>password</var>, run these steps:

<ol>
 <li><p>If <var>password</var> is the empty string, set <var>url</var>’s
 <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> to null.

 <li>
  <p>Otherwise, run these substeps:

  <ol>
   <li><p>Set <var>url</var>’s <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> to
   the empty string.

   <li><p>For each code point in <var>password</var>,
   <a data-link-type=dfn href=#utf-8-percent-encode title="utf-8 percent encode">utf-8 percent encode</a> it using the <a data-link-type=dfn href=#password-encode-set title="password encode set">password encode set</a>, and
   append the result to <var>url</var>’s
   <a data-link-type=dfn href=#concept-url-password title="URL password">password</a>.
  </ol>
</ol>


<h3 class="heading settled" data-level=4.3 id=url-serializing><span class=secno>4.3. </span><span class=content>URL serializing</span><a class=self-link href=#url-serializing></a></h3>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=concept-url-serializer>URL serializer<a class=self-link href=#concept-url-serializer></a></dfn> takes a
<a data-link-type=dfn href=#concept-url title=URL>URL</a> <var>url</var>,
optionally an <i title="">exclude fragment flag</i>, and then runs these steps:

<ol>
 <li><p>Let <var>output</var> be <var>url</var>’s
 <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> and
 "<code>:</code>" concatenated.

 <li>
  <p>If <var>url</var>’s <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is set:

  <ol>
   <li><p>Append "<code>//</code>" to <var>output</var>.

   <li>
    <p>If <var>url</var>’s
    <a data-link-type=dfn href=#concept-url-username title="URL username">username</a> is not the empty string
    or <var>url</var>’s
    <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> is non-null, run these
    substeps:

    <ol>
     <li><p>Append <var>url</var>’s
     <a data-link-type=dfn href=#concept-url-username title="URL username">username</a> to
     <var>output</var>.

     <li><p>If <var>url</var>’s
     <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> is non-null, append
     "<code>:</code>" concatenated with <var>url</var>’s
     <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> to
     <var>output</var>.

     <li><p>Append "<code>@</code>" to <var>output</var>.
    </ol>

   <li><p>Append <var>url</var>’s
   <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
   <a data-link-type=dfn href=#concept-host-serializer title="host serializer">serialized</a>, to
   <var>output</var>.

   <li><p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>
   is not the empty string, append "<code>:</code>" concatenated with
   <var>url</var>’s <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> to
   <var>output</var>.

   <li><p>Append "<code>/</code>" concatenated with the strings in
   <var>url</var>’s <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>
   (including empty strings), separated from each other by
   "<code>/</code>" to <var>output</var>.
  </ol>

 <li><p>Otherwise, if <var>url</var>’s <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is
 unset, append <var>url</var>’s
 <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a> to
 <var>output</var>.

 <li><p>If <var>url</var>’s <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> is non-null,
 append "<code>?</code>" concatenated with <var>url</var>’s
 <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to <var>output</var>.

 <li><p>If the <i title="">exclude fragment flag</i> is unset and
 <var>url</var>’s <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> is
 non-null, append  "<code>#</code>" concatenated with
 <var>url</var>’s <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> to
 <var>output</var>.

 <li><p>Return <var>output</var>.
</ol>

<h3 class="heading settled" data-level=4.4 id=origin><span class=secno>4.4. </span><span class=content>Origin</span><a class=self-link href=#origin></a></h3>


<p class=note role=note>See <a data-link-type=dfn href=http://dev.w3.org/csswg/css-cascade-3/#origin title=origin>origin</a>’s definition in HTML for the
necessary background information. <a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>

<p>A <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <dfn data-dfn-type=dfn data-noexport="" id=concept-url-origin title="URL origin">origin<a class=self-link href=#concept-url-origin></a></dfn> is
the <a data-link-type=dfn href=http://dev.w3.org/csswg/css-cascade-3/#origin title=origin>origin</a> returned by running these steps, switching
on <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>:

<dl class=switch>
 <dt>"<code>blob</code>"
 <dd>
  <p>Let <var>url</var> be the result of
  <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">parsing</a>
  <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s
  <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>.

  <p>If <var>url</var> is failure, return a new globally unique identifier.
  Otherwise, return <var>url</var>’s <a data-link-type=dfn href=#concept-url-origin title="URL origin">origin</a>.
  

  <p class="example no-backref">The <a data-link-type=dfn href=#concept-url-origin title="URL origin">origin</a> of
  <code>blob:https://whatwg.org/d0360e2f-caee-469f-9a2f-87d5b0456f6f</code> is
  the tuple
  (<code>https</code>, <code>whatwg.org</code>, <code>443</code>).

 <dt>"<code>ftp</code>"
 <dt>"<code>gopher</code>"
 <dt>"<code>http</code>"
 <dt>"<code>https</code>"
 <dt>"<code>ws</code>"
 <dt>"<code>wss</code>"
 <dd><p>Return a tuple consisting of <a data-link-type=dfn href=#concept-url title=URL>URL</a>’s
 <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a>, its
 <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>, and its <a data-link-type=dfn href=#default-port title="default port">default port</a> if its
 <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> is the empty string, and its
 <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> otherwise.

 <dt>"<code>file</code>"
 <dd><p>Unfortunate as it is, this is left as an exercise to the reader. When in doubt,
 return a new globally unique identifier.

 <dt>Otherwise
 <dd><p>Return a new globally unique identifier.
</dl>


<h2 class="heading settled" data-level=5 id=application/x-www-form-urlencoded><span class=secno>5. </span><span class=content><code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code></span><a class=self-link href=#application/x-www-form-urlencoded></a></h2>

<p>The <dfn data-dfn-type=dfn data-noexport="" id=application-x-www-form-urlencoded-0><code>application/x-www-form-urlencoded</code><a class=self-link href=#application-x-www-form-urlencoded-0></a></dfn> format is a simple way to
encode name-value pairs in a byte sequence where all bytes are in the 0x00 to 0x7F range.

<p class="note no-backref" role=note>While this description makes
<code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> sound dated — and really, it is — the
format is in widespread use due to its prevalence of HTML forms.
<a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>

<h3 class="heading settled" data-level=5.1 id=urlencoded-parsing><span class=secno>5.1. </span><span class=content><code title=application-x-www-form-urlencoded-0>application/x-www-form-urlencoded</code> parsing</span><a class=self-link href=#urlencoded-parsing></a></h3>

<p class="note no-backref" role=note>The features provided by the
<code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#concept-urlencoded-parser title="urlencoded parser"></a><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> parser
are mainly relevant for server-oriented implementations. A browser-based implementation
only needs what the
<code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#concept-urlencoded-string-parser title="urlencoded string parser"></a><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> string parser
requires.

<p>The
<dfn data-dfn-type=dfn data-noexport="" id=concept-urlencoded-parser title="urlencoded parser"><code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> parser<a class=self-link href=#concept-urlencoded-parser></a></dfn>
takes a byte sequence <var>input</var>, optionally with an
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encoding>encoding</a> <var>encoding override</var>,
optionally with a <i title="">use _charset_ flag</i>, and optionally with an
<i title="">isindex flag</i>, and then runs these steps:

<ol>
 <li><p>If <var>encoding override</var> is not given, set it to
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a>.

 <li>
  <p>If <var>encoding override</var> is not
  <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a> and <var>input</var> contains bytes
  whose value is greater than 0x7F, return failure.

  <p class="note no-backref" role=note>This can only happen if <var>input</var> was not
  generated through the <a data-link-type=dfn href=#concept-urlencoded-serializer title="urlencoded serializer">serializer</a> or
  <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code>.

 <li><p>Let <var>sequences</var> be the result of splitting
 <var>input</var> on `<code>&amp;</code>`.
 

 <li><p>If the <i title="">isindex flag</i> is set and the first byte sequence in
 <var>sequences</var> does not contain a `<code>=</code>`, prepend
 `<code>=</code>` to the first byte sequence in <var>sequences</var>.

 <li><p>Let <var>pairs</var> be an empty list of name-value pairs where both name
 and value hold a byte sequence.

 <li>
  <p>For each byte sequence <var>bytes</var> in <var>sequences</var>,
  run these substeps:

  <ol>
   <li><p>If <var>bytes</var> is the empty byte sequence, run these substeps for the
   next byte sequence.

   <li><p>If <var>bytes</var> contains a `<code>=</code>`, then let
   <var>name</var> be the bytes from the start of <var>bytes</var> up to but
   excluding its first `<code>=</code>`, and let <var>value</var> be the
   bytes, if any, after the first `<code>=</code>` up to the end of
   <var>bytes</var>. If `<code>=</code>` is the first byte, then
   <var>name</var> will be the empty byte sequence. If it is the last, then
   <var>value</var> will be the empty byte sequence.

   <li><p>Otherwise, let <var>name</var> have the value of <var>bytes</var>
   and let <var>value</var> be the empty byte sequence.

   <li><p>Replace any `<code>+</code>` in <var>name</var> and
   <var>value</var> with 0x20.

   <li>
    <p>If <i title="">use _charset_ flag</i> is set, <var>name</var> is
    `<code>_charset_</code>`, run these substeps:

    <ol>
     <li><p>Let <var>result</var> be the result of
     <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#concept-encoding-get title=concept-encoding-get>getting an encoding</a>
     for <var>value</var>,
     <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-decode-without-bom title="utf-8 decode without BOM">decoded</a>.

     <li><p>If <var>result</var> is not failure, unset <i title="">use _charset_ flag</i> and
     set <var>encoding override</var> to <var>result</var>.
    </ol>

   <li><p>Add a pair consisting of <var>name</var> and
   <var>value</var> to <var>pairs</var>.
  </ol>

 <li><p>Let <var>output</var> be an empty list of name-value pairs where both name
 and value hold a string.

 <li><p>For each name-value pair in <var>pairs</var>, append a name-value pair to
 <var>output</var> where the new name and value appended to <var>output</var>
 are the result of running <var>encoding override</var>’s
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#decoder title=decoder>decoder</a> on the
 <a data-link-type=dfn href=#percent-decode title="percent decode">percent decoding</a> of the name and value from
 <var>pairs</var>, respectively.

 <li><p>Return <var>output</var>.
</ol>

<h3 class="heading settled" data-level=5.2 id=urlencoded-serializing><span class=secno>5.2. </span><span class=content><code title=application-x-www-form-urlencoded-0>application/x-www-form-urlencoded</code> serializing</span><a class=self-link href=#urlencoded-serializing></a></h3>

<p>The
<dfn data-dfn-type=dfn data-noexport="" id=concept-urlencoded-byte-serializer title="urlencoded byte serializer"><code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> byte serializer<a class=self-link href=#concept-urlencoded-byte-serializer></a></dfn>
takes a byte sequence <var>input</var> and then runs these steps:

<ol>
 <li><p>Let <var>output</var> be the empty string.
 <li>
  <p>For each byte in <var>input</var>, depending on
  <var>byte</var>:

  <dl>
   <dt>0x20
   <dd><p>Append U+002B to <var>output</var>.

   <dt>0x2A
   <dt>0x2D
   <dt>0x2E
   <dt>0x30 to 0x39
   <dt>0x41 to 0x5A
   <dt>0x5F
   <dt>0x61 to 0x7A
   <dd><p>Append a code point whose value is <var>byte</var> to
   <var>output</var>.

   <dt>Otherwise
   <dd><p>Append <var>byte</var>,
   <a data-link-type=dfn href=#percent-encode title="percent encode">percent encoded</a>, to
   <var>output</var>.
  </dl>
 <li><p>Return <var>output</var>.
</ol>


<p>The
<dfn data-dfn-type=dfn data-noexport="" id=concept-urlencoded-serializer title="urlencoded serializer"><code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> serializer<a class=self-link href=#concept-urlencoded-serializer></a></dfn>
takes a list of name-value pairs <var>pairs</var>, optionally with an
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encoding>encoding</a>
<var>encoding override</var>, and then runs these steps:

<ol>
 <li><p>If <var>encoding override</var> is not given, set it to
 <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a>.

 <li><p>Let <var>output</var> be the empty string.

 <li>
  <p>For each <var>pair</var> in <var>pairs</var>, run
  these substeps:

  <ol>
   <li><p>Let <var>outputPair</var> be a copy of <var>pair</var>.

   <li><p>Replace <var>outputPair</var>’s name and value with the result of running
   <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encode>encode</a> on them using
   <var>encoding override</var>, respectively.

   <li><p>Replace <var>outputPair</var>’s name and value with their
   <a data-link-type=dfn href=#concept-urlencoded-byte-serializer title="urlencoded byte serializer">serialization</a>.

   <li><p>If <var>pair</var> is not the first pair in <var>pairs</var>, append
   "<code>&amp;</code>" to <var>output</var>.

   <li><p>Append <var>outputPair</var>’s name, followed by "<code>=</code>",
   followed by <var>outputPair</var>’s value to <var>output</var>.
  </ol>

 <li>Return <var>output</var>.
</ol>

<h3 class="heading settled" data-level=5.3 id=urlencoded-hooks><span class=secno>5.3. </span><span class=content>Hooks</span><a class=self-link href=#urlencoded-hooks></a></h3>

<p>The
<dfn data-dfn-type=dfn data-noexport="" id=concept-urlencoded-string-parser title="urlencoded string parser"><code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> string parser<a class=self-link href=#concept-urlencoded-string-parser></a></dfn>
takes a string <var>input</var>,
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8-encode title="utf-8 encode">utf-8 encodes</a> it, and then
returns the result of
<code title=application-x-www-form-urlencoded-0><a data-link-type=dfn href=#concept-urlencoded-parser title="urlencoded parser"></a><a data-link-type=dfn href=#application-x-www-form-urlencoded-0 title=application/x-www-form-urlencoded>application/x-www-form-urlencoded</a></code> parsing
it.



<h2 class="heading settled" data-level=6 id=api><span class=secno>6. </span><span class=content>API</span><a class=self-link href=#api></a></h2>



<pre class=idl>[Constructor(USVString <dfn class=idl-code data-dfn-for=URL/URL() data-dfn-type=argument data-export="" data-global-name="URL<interface>/URL()<method>/url<argument>" id=dom-url-url-url>url<a class=self-link href=#dom-url-url-url></a></dfn>, optional USVString <dfn class=idl-code data-dfn-for=URL/URL() data-dfn-type=argument data-export="" data-global-name="URL<interface>/URL()<method>/base<argument>" id=dom-url-url-base>base<a class=self-link href=#dom-url-url-base></a></dfn> = "about:blank"),
 Exposed=(Window,Worker)]
interface <dfn class=idl-code data-dfn-type=interface data-export="" data-global-name="" id=dom-url>URL<a class=self-link href=#dom-url></a></dfn> {
  static USVString <a class=idl-code data-global-name="URL<interface>/domaintoascii()<method>" data-link-for=URL data-link-type=method href=#dom-url-domaintoascii title=domainToASCII()>domainToASCII</a>(USVString <dfn class=idl-code data-dfn-for=URL/domainToASCII() data-dfn-type=argument data-export="" data-global-name="URL<interface>/domainToASCII()<method>/domain<argument>" id=dom-url-domaintoascii-domain>domain<a class=self-link href=#dom-url-domaintoascii-domain></a></dfn>);
  static USVString <a class=idl-code data-global-name="URL<interface>/domaintounicode()<method>" data-link-for=URL data-link-type=method href=#dom-url-domaintounicode title=domainToUnicode()>domainToUnicode</a>(USVString <dfn class=idl-code data-dfn-for=URL/domainToUnicode() data-dfn-type=argument data-export="" data-global-name="URL<interface>/domainToUnicode()<method>/domain<argument>" id=dom-url-domaintounicode-domain>domain<a class=self-link href=#dom-url-domaintounicode-domain></a></dfn>);
};
<a data-link-type=idl-name href=#dom-url title=URL>URL</a> implements <a data-link-type=idl-name href=#dom-urlutils title=URLUtils>URLUtils</a>;

[NoInterfaceObject,
 Exposed=(Window,Worker)]
interface <dfn class=idl-code data-dfn-type=interface data-export="" data-global-name="" id=dom-urlutils>URLUtils<a class=self-link href=#dom-urlutils></a></dfn> {
  stringifier attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/href<stringifier>" data-link-for=URLUtils data-link-type=stringifier href=#dom-urlutils-href title=href>href</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/origin<attribute>" data-link-for=URLUtils data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutils-origin title=origin>origin</a>;

           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/protocol<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-protocol title=protocol>protocol</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/username<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-username title=username>username</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/password<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-password title=password>password</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/host<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-host title=host>host</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/hostname<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-hostname title=hostname>hostname</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/port<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-port title=port>port</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/pathname<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-pathname title=pathname>pathname</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/search<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-search title=search>search</a>;
           attribute <a data-link-type=idl-name href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a> <a class=idl-code data-global-name="URLUtils<interface>/searchparams<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="URLSearchParams " href=#dom-urlutils-searchparams title=searchParams>searchParams</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/hash<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-hash title=hash>hash</a>;
};

[NoInterfaceObject,
 Exposed=(Window,Worker)]
interface <dfn class=idl-code data-dfn-type=interface data-export="" data-global-name="" id=dom-urlutilsreadonly>URLUtilsReadOnly<a class=self-link href=#dom-urlutilsreadonly></a></dfn> {
  stringifier readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/href<stringifier>" data-link-for=URLUtilsReadOnly data-link-type=stringifier href=#dom-urlutilsreadonly-href title=href>href</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/origin<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-origin title=origin>origin</a>;

  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/protocol<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-protocol title=protocol>protocol</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/host<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-host title=host>host</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/hostname<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-hostname title=hostname>hostname</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/port<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-port title=port>port</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/pathname<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-pathname title=pathname>pathname</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/search<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-search title=search>search</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/hash<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-hash title=hash>hash</a>;
};</pre>

<p>Except where different objects implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a></code> are identical
to objects implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code>.

<p class=note role=note>Since all members are readonly and certain members from
<code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> are not exposed a number of potential optimizations is possible
compared to objects implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code>. These are left as an exercise to
the reader.

</p>

<p>Specifications defining objects implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> or
<code><a class=idl-code data-link-type=interface href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a></code> must define a
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-get-the-base title="URLUtils get the base">get the base<a class=self-link href=#concept-URLUtils-get-the-base></a></dfn> algorithm, which must return the
appropriate <a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> for the object.

<p>Specifications defining objects implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> may
define <dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-update title="URLUtils update">update steps<a class=self-link href=#concept-URLUtils-update></a></dfn> to make it possible for an
underlying string (such as an
<a data-link-type=dfn href=https://dom.spec.whatwg.org/#concept-attribute-value title=concept-attribute-value>attribute value</a>)
to be updated. The <a data-link-type=dfn href=#concept-URLUtils-update title="URLUtils update">update steps</a> are passed a string
<var>value</var> for this purpose.

<p>An object implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> or <code><a class=idl-code data-link-type=interface href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a></code> has an
associated <dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-input title="URLUtils input">input<a class=self-link href=#concept-URLUtils-input></a></dfn> (a string),
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-query-encoding title="URLUtils query encoding">query encoding<a class=self-link href=#concept-URLUtils-query-encoding></a></dfn>
(an <a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encoding>encoding</a>),
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-query-object title="URLUtils query object">query object<a class=self-link href=#concept-URLUtils-query-object></a></dfn>
(a <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object or null), and a
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-url title="URLUtils URL">url<a class=self-link href=#concept-URLUtils-url></a></dfn> (a <a data-link-type=dfn href=#concept-url title=URL>URL</a> or null).

<p>Unless stated otherwise, <a data-link-type=dfn href=#concept-URLUtils-query-encoding title="URLUtils query encoding">query encoding</a> is
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a> and
<a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a> is null. The others follow
from the <a data-link-type=dfn href=#concept-URLUtils-set-the-input title="URLUtils set the input">set the input</a> algorithm.</p>

<p class=note role=note>The associated
<a data-link-type=dfn href=#concept-URLUtils-query-encoding title="URLUtils query encoding">query encoding</a> is a legacy
concept only relevant for HTML.
<a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>

<p>Specifications defining objects implementing <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> or
<code><a class=idl-code data-link-type=interface href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a></code> must use the
<a data-link-type=dfn href=#concept-URLUtils-set-the-input title="URLUtils set the input">set the input</a> algorithms to set
<a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a>, <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>, and
<a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>. To
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLUtils-set-the-input title="URLUtils set the input">set the input<a class=self-link href=#concept-URLUtils-set-the-input></a></dfn> given <var>input</var>
and optionally a <var>url</var>, run these steps:

<ol>
 <li><p>If <var>url</var> is given, set <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>
 to <var>url</var> and <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a> to
 <var>input</var>.

 <li>
  <p>Otherwise, run these substeps:

  <ol>
   <li><p>Set <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> to null.

   <li><p>If <var>input</var> is null, set
   <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a> to the empty string.

   <li>
    <p>Otherwise, run these subsubsteps:

    <ol>
     <li><p>Set <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a> to <var>input</var>.

     <li><p>Let <var>url</var> be the result of running the
     <a data-link-type=dfn href=#concept-url-parser title="URL parser">URL parser</a> on
     <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a> with
     <a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> being the result of running
     <a data-link-type=dfn href=#concept-URLUtils-get-the-base title="URLUtils get the base">get the base</a> and
     <a data-link-type=dfn href=#concept-URLUtils-query-encoding title="URLUtils query encoding">query encoding</a> as
     <var>encoding override</var>.
     

     <li><p>If <var>url</var> is not failure, set
     <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> to <var>url</var>.
    </ol>
  </ol>

 <li><p>Let <var>query</var> be <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>’s
 <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> if <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>
 is non-null, and the empty string otherwise.

 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a> is null, set
 <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a> to a
 <code><a data-link-type=dfn href=#concept-URLSearchParams-new title="URLSearchParams new">new </a><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object
 using <var>query</var>, and then append the
 <a data-link-type=dfn href=https://dom.spec.whatwg.org/#context-object title="context object">context object</a> to
 <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s list of
 <a data-link-type=dfn href=#concept-URLSearchParams-url-object title="URLSearchParams URL object">url objects</a>.

 <li><p>Otherwise, set <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a> to the result of
 <a data-link-type=dfn href=#concept-urlencoded-string-parser title="urlencoded string parser">parsing</a> <var>query</var>.
</ol>

<p>To run the <dfn data-dfn-type=dfn data-noexport="" id=pre-update-steps>pre-update steps<a class=self-link href=#pre-update-steps></a></dfn> for an object implementing
<code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code>, optionally given a <var>value</var>, run these steps:

<ol>
 <li><p>If <var>value</var> is not given, let <var>value</var> be the result
 of <a data-link-type=dfn href=#concept-url-serializer title="URL serializer">serializing</a> the associated
 <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>.
 

 <li><p>Run the <a data-link-type=dfn href=#concept-URLUtils-update title="URLUtils update">update steps</a> with
 <var>value</var>.
</ol>


<h3 class="heading settled" data-level=6.1 id=constructors><span class=secno>6.1. </span><span class=content>Constructors</span><a class=self-link href=#constructors></a></h3> 

<p>The
<dfn class=idl-code data-dfn-for=URL data-dfn-type=constructor data-export="" id=dom-url-url title=URL()><code>URL(<var>url</var>, <var>base</var>)</code><a class=self-link href=#dom-url-url></a></dfn>
constructor, when invoked, must run these steps:

<ol>
 <li><p>Let <var>parsedBase</var> be the result of running the
 <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">basic URL parser</a> on <var>base</var>.

 <li><p>If <var>parsedBase</var> is failure,
 <a data-link-type=dfn href=http://heycam.github.io/webidl/#dfn-throw title=throw>throw</a> a <code>TypeError</code> exception.

 <li><p>Set <var>parsedURL</var> to the result of running the
 <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">basic URL parser</a> on <var>url</var>
 with <var>parsedBase</var>.

 <li><p>If <var>parsedURL</var> is failure,
 <a data-link-type=dfn href=http://heycam.github.io/webidl/#dfn-throw title=throw>throw</a> a <code>TypeError</code> exception.

 <li><p>Let <var>result</var> be a new <code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code> object.

 <li><p>Let <var>result</var>’s
 <a data-link-type=dfn href=#concept-URLUtils-get-the-base title="URLUtils get the base">get the base</a> return
 <var>parsedBase</var>.

 <li>
  <p>Run <var>result</var>’s
  <a data-link-type=dfn href=#concept-URLUtils-set-the-input title="URLUtils set the input">set the input</a> given the empty string
  and <var>parsedURL</var>.

  <p class="note no-backref" role=note>A <code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code> object’s
  <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a> is never exposed.

 <li><p>Return <var>result</var>.
</ol>

<div class=example>
 <p>To <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> a string into a
 <a data-link-type=dfn href=#concept-url title=URL>URL</a> without using a
 <a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a>, invoke the constructor with a single
 argument:

 <pre>var input = "https://example.org/💩",
    url = new URL(input)
url.pathname // "/%F0%9F%92%A9"</pre>

 <p>Alternatively you can use the <a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> of a
 <a data-link-type=dfn href=https://dom.spec.whatwg.org/#concept-document title=concept-document>document</a> through
 <code><a data-link-type=dfn href=https://dom.spec.whatwg.org/#dom-node-baseuri title=dom-Node-baseURI>baseURI</a></code>:

 <pre>var input = "/💩",
    url = new URL(input, document.baseURI)
url.href // "https://url.spec.whatwg.org/%F0%9F%92%A9"</pre>
</div>


<h3 class="heading settled" data-level=6.2 id=url-statics><span class=secno>6.2. </span><span class=content><code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code> statics</span><a class=self-link href=#url-statics></a></h3>

<p>The
<dfn class=idl-code data-dfn-for=URL data-dfn-type=method data-export="" id=dom-url-domaintoascii title=domainToASCII()><code>domainToASCII(<var>domain</var>)</code><a class=self-link href=#dom-url-domaintoascii></a></dfn>
static method, when invoked, must run these steps:

<ol>
 <li><p>Let <var>asciiDomain</var> be the result of
 <a data-link-type=dfn href=#concept-host-parser title="host parser">host parsing</a> <var>domain</var>.

 <li><p>If <var>asciiDomain</var> is an <a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a>
 or failure, return the empty string.

 <li><p>Return <var>asciiDomain</var>.
</ol>

<p>The
<dfn class=idl-code data-dfn-for=URL data-dfn-type=method data-export="" id=dom-url-domaintounicode title=domainToUnicode()><code>domainToUnicode(<var>domain</var>)</code><a class=self-link href=#dom-url-domaintounicode></a></dfn>
static method, when invoked, must run these steps:

<ol>
 <li><p>Let <var>unicodeDomain</var> be the result of
 <a data-link-type=dfn href=#concept-host-parser title="host parser">host parsing</a> <var>domain</var> with the
 <var>Unicode flag</var> set.

 <li><p>If <var>unicodeDomain</var> is an
 <a data-link-type=dfn href=#concept-ipv6 title=IPv6>IPv6 address</a> or failure, return the empty string.

 <li><p>Return <var>unicodeDomain</var>.
</ol>

<p class=XXX>Add domainToUI() which follows the UA conventions for when to use the Unicode
representation?


<h3 class="heading settled" data-level=6.3 id=urlutils-and-urlutilsreadonly-members><span class=secno>6.3. </span><span class=content><code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> and <code><a class=idl-code data-link-type=interface href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a></code> members</span><a class=self-link href=#urlutils-and-urlutilsreadonly-members></a></h3>

<p class=note role=note>The <code><a class=idl-code data-link-type=interface href=#dom-urlutils title=URLUtils>URLUtils</a></code> and <code><a class=idl-code data-link-type=interface href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a></code> interfaces are
not exposed on the global object. They are meant to augment other interfaces, such as
<code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code>.

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=stringifier data-export="" id=dom-urlutilsreadonly-href><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=stringifier data-export="" id=dom-urlutils-href><code>href</code><a class=self-link href=#dom-urlutils-href></a></dfn><a class=self-link href=#dom-urlutilsreadonly-href></a></dfn> attribute’s getter must run
these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return
 <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a>.

 <li><p>Return the <a data-link-type=dfn href=#concept-url-serializer title="URL serializer">serialization</a>
 of <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=stringifier href=#dom-urlutils-href title=href>href</a></code> attribute’s setter must run these steps:

<ol>
 <li><p>Let <var>input</var> be the given value.

 <li>
  <p>If the <code><a data-link-type=dfn href=https://dom.spec.whatwg.org/#context-object title="context object">context object</a> is a <a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code> object,
  run these substeps:

  <ol>
   <li><p>Let <var>parsedURL</var> be the result of running the
   <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">basic URL parser</a> on <var>input</var>
   with <a data-link-type=dfn href=#concept-base-url title="base URL">base URL</a> being the result of running
   <a data-link-type=dfn href=#concept-URLUtils-get-the-base title="URLUtils get the base">get the base</a>.

   <li><p>If <var>parsedURL</var> is failure,
   <a data-link-type=dfn href=http://heycam.github.io/webidl/#dfn-throw title=throw>throw</a> a <code>TypeError</code> exception.

   <li>
    <p>Run <a data-link-type=dfn href=#concept-URLUtils-set-the-input title="URLUtils set the input">set the input</a> given the empty
    string and <var>parsedURL</var>.

    <p class="note no-backref" role=note>A <code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code> object’s
    <a data-link-type=dfn href=#concept-URLUtils-input title="URLUtils input">input</a> is never exposed.
  </ol>

 <li>
  <p>Otherwise, run these substeps:

  <ol>
   <li><p>Run the <a data-link-type=dfn href=#concept-URLUtils-set-the-input title="URLUtils set the input">set the input</a>
   algorithm for <var>input</var>.

   <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a> with the <var>input</var>.
  </ol>

  <div class=example>
   <p>This means that if the <code><a class=idl-code data-link-for=URLUtils data-link-type=stringifier href=#dom-urlutils-href title=href>href</a></code> attribute is set to
   value that would cause the <a data-link-type=dfn href=#concept-url-parser title="URL parser">URL parser</a> to return
   failure, that value is still passed through unchanged. This is one of those unfortunate
   legacy incidents.

   <pre>var a = document.createElement("a"),
    input = "https://test:test/" // invalid port makes the parser return failure
a.href = test
a.href === test // true</pre>
  </div>
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-origin><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-origin><code>origin</code><a class=self-link href=#dom-urlutils-origin></a></dfn><a class=self-link href=#dom-urlutilsreadonly-origin></a></dfn> attribute’s getter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return the empty
 string.

 <li><p>Return the
 <a data-link-type=dfn href=https://html.spec.whatwg.org/multipage/browsers.html#unicode-serialisation-of-an-origin title="Unicode serialization of an origin">Unicode serialization</a>
 of <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>’s <a data-link-type=dfn href=#concept-url-origin title="URL origin">origin</a>.
 <a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>
</ol>

<p class=note role=note>It returns the Unicode rather than the ASCII serialization for
compatibility with HTML’s <code>MessageEvent</code> feature.
<a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-protocol><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-protocol><code>protocol</code><a class=self-link href=#dom-urlutils-protocol></a></dfn><a class=self-link href=#dom-urlutilsreadonly-protocol></a></dfn> attribute’s getter
must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return
 "<code>:</code>".

 <li><p>Return <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> and
 "<code>:</code>" concatenated.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-protocol title=protocol>protocol</a></code> attribute’s setter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, terminate
 these steps.

 <li><p><a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> the given value and
 "<code>:</code>" concatenated with
 <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var> and
 <a data-link-type=dfn href=#scheme-start-state title="scheme start state">scheme start state</a> as <var>state override</var>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-username><code>username</code><a class=self-link href=#dom-urlutils-username></a></dfn> attribute’s getter
must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return the
 empty string.

 <li><p>Return <a data-link-type=dfn href=#concept-url-username title="URL username">username</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-username title=username>username</a></code> attribute’s setter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, terminate these steps.

 <li><p><a data-link-type=dfn href=#set-the-username title="Set the username">Set the username</a> given <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>
 and the given value.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-password><code>password</code><a class=self-link href=#dom-urlutils-password></a></dfn> attribute’s getter
must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null or its
 <a data-link-type=dfn href=#concept-url-password title="URL password">password</a> is null, return the empty
 string.

 <li><p>Return <a data-link-type=dfn href=#concept-url-password title="URL password">password</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-password title=password>password</a></code> attribute’s setter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, terminate these steps.

 <li><p><a data-link-type=dfn href=#set-the-password title="Set the password">Set the password</a> given <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>
 and the given value.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-host><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-host><code>host</code><a class=self-link href=#dom-urlutils-host></a></dfn><a class=self-link href=#dom-urlutilsreadonly-host></a></dfn> attribute’s getter must run
these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return the
 empty string.

 <li><p>If <a data-link-type=dfn href=#concept-url-port title="URL port">port</a> is the empty string,
 return <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
 <a data-link-type=dfn href=#concept-host-serializer title="host serializer">serialized</a>.

 <li><p>Return <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
 <a data-link-type=dfn href=#concept-host-serializer title="host serializer">serialized</a>,
 "<code>:</code>", and <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>
 concatenated.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-host title=host>host</a></code> attribute’s setter must run these
steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, terminate these steps.

 <li><p><a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> the given value with
 <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var> and
 <a data-link-type=dfn href=#host-state title="host state">host state</a> as <var>state override</var>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-hostname><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-hostname><code>hostname</code><a class=self-link href=#dom-urlutils-hostname></a></dfn><a class=self-link href=#dom-urlutilsreadonly-hostname></a></dfn> attribute’s getter
must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return the
 empty string.

 <li><p>Return <a data-link-type=dfn href=#concept-url-host title="URL host">host</a>,
 <a data-link-type=dfn href=#concept-host-serializer title="host serializer">serialized</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-hostname title=hostname>hostname</a></code> attribute’s setter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, terminate these steps.

 <li><p><a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> the given value with
 <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var> and
 <a data-link-type=dfn href=#hostname-state title="hostname state">hostname state</a> as <var>state override</var>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-port><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-port><code>port</code><a class=self-link href=#dom-urlutils-port></a></dfn><a class=self-link href=#dom-urlutilsreadonly-port></a></dfn> attribute’s getter must run
these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return the
 empty string.

 <li><p>Return <a data-link-type=dfn href=#concept-url-port title="URL port">port</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-port title=port>port</a></code> attribute’s setter must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, its
 <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, or its
 <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is "<code>file</code>",
 terminate these steps.

 <li><p>Otherwise, <a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a>
 the given value with <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var> and
 <a data-link-type=dfn href=#port-state title="port state">port state</a> as <var>state override</var>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-pathname><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-pathname><code>pathname</code><a class=self-link href=#dom-urlutils-pathname></a></dfn><a class=self-link href=#dom-urlutilsreadonly-pathname></a></dfn> attribute’s getter
must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, return the
 empty string.

 <li><p>If the <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, return
 <a data-link-type=dfn href=#concept-url-scheme-data title="URL scheme data">scheme data</a>.

 <li><p>Return "<code>/</code>" concatenated with the strings in
 <a data-link-type=dfn href=#concept-url-path title="URL path">path</a> (including empty strings),
 separated from each other by "<code>/</code>".
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-pathname title=pathname>pathname</a></code> attribute’s setter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#relative-flag title="relative flag">relative flag</a> is unset, terminate these steps.

 <li><p>Empty <a data-link-type=dfn href=#concept-url-path title="URL path">path</a>.

 <li><p><a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> the given value with
 <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var> and
 <a data-link-type=dfn href=#relative-path-start-state title="relative path start state">relative path start state</a> as <var>state override</var>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-search><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-search><code>search</code><a class=self-link href=#dom-urlutils-search></a></dfn><a class=self-link href=#dom-urlutilsreadonly-search></a></dfn> attribute’s getter must
run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> is either null or
 the empty string, return the empty string.

 <li><p>Return "<code>?</code>" concatenated with
 <a data-link-type=dfn href=#concept-url-query title="URL query">query</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-search title=search>search</a></code> attribute’s setter must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, terminate these steps.

 <li><p>If the given value is the empty string, set
 <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to null, empty
 <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>, run its
 <a data-link-type=dfn href=#concept-URLSearchParams-update title="URLSearchParams update">update steps</a>, and terminate these
 steps.

 <li><p>Let <var>input</var> be the given value with a single leading
 "<code>?</code>" removed, if any.

 <li><p>Set <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to the empty string.

 <li><p><a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> <var>input</var>
 with <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var>,
 <a data-link-type=dfn href=#query-state title="query state">query state</a> as <var>state override</var>, and the
 associated <a data-link-type=dfn href=#concept-URLUtils-query-encoding title="URLUtils query encoding">query encoding</a> as
 <var>encoding override</var>.

 <li><p>Set <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a> to the result of
 <a data-link-type=dfn href=#concept-urlencoded-string-parser title="urlencoded string parser">parsing</a> <var title="">input</var>.

 <li><p>Run <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s
 <a data-link-type=dfn href=#concept-URLSearchParams-update title="URLSearchParams update">update steps</a>.
</ol>

<p class="note no-backref" role=note>The <a data-link-type=dfn href=#concept-URLSearchParams-update title="URLSearchParams update">update steps</a> of
<a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a> are run to ensure all
<a data-link-type=dfn href=#concept-URLSearchParams-url-object title="URLSearchParams URL object">url objects</a> remain synchronized.

<p>The <dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-searchparams><code>searchParams</code><a class=self-link href=#dom-urlutils-searchparams></a></dfn> attribute’s getter
must return the <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>.

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-searchparams title=searchParams>searchParams</a></code> attribute’s setter must run
these steps:

<ol>
 <li><p>Let <var>object</var> be the given value.

 <li><p>Remove the <a data-link-type=dfn href=https://dom.spec.whatwg.org/#context-object title="context object">context object</a> from
 <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s list of
 <a data-link-type=dfn href=#concept-URLSearchParams-url-object title="URLSearchParams URL object">url objects</a>.

 <li><p>Append the <a data-link-type=dfn href=https://dom.spec.whatwg.org/#context-object title="context object">context object</a> to
 <var>object</var>’s list of
 <a data-link-type=dfn href=#concept-URLSearchParams-url-object title="URLSearchParams URL object">url objects</a>.

 <li><p>Set <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a> to
 <var>object</var>.

 <li><p>Set <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to the
 <a data-link-type=dfn href=#concept-urlencoded-serializer title="urlencoded serializer">serialization</a> of the
 <a data-link-type=dfn href=#concept-URLUtils-query-object title="URLUtils query object">query object</a>’s
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The <dfn class=idl-code data-dfn-for=URLUtilsReadOnly data-dfn-type=attribute data-export="" id=dom-urlutilsreadonly-hash><dfn class=idl-code data-dfn-for=URLUtils data-dfn-type=attribute data-export="" id=dom-urlutils-hash><code>hash</code><a class=self-link href=#dom-urlutils-hash></a></dfn><a class=self-link href=#dom-urlutilsreadonly-hash></a></dfn> attribute’s getter must run
these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> is either null or
 the empty string, return the empty string.

 <li><p>Return "<code>#</code>" concatenated with
 <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a>.
</ol>

<p>The <code><a class=idl-code data-link-for=URLUtils data-link-type=attribute href=#dom-urlutils-hash title=hash>hash</a></code> attribute’s setter must run these steps:

<ol>
 <li><p>If <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> is null, or its
 <a data-link-type=dfn href=#concept-url-scheme title="URL scheme">scheme</a> is
 "<code>javascript</code>", terminate these steps.

 <li><p>If the given value is the empty string, set
 <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> to null, run the
 <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>, and terminate these steps.

 <li><p>Let <var>input</var> be the given value with a single leading
 "<code>#</code>" removed, if any.

 <li><p>Set <a data-link-type=dfn href=#concept-url-fragment title="URL fragment">fragment</a> to
 the empty string.

 <li><p><a data-link-type=dfn href=#concept-basic-url-parser title="basic URL parser">Basic URL parse</a> <var>input</var>
 with <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a> as <var>url</var> and
 <a data-link-type=dfn href=#fragment-state title="fragment state">fragment state</a> as <var>state override</var>.

 <li><p>Run the <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>


<h3 class="heading settled" data-level=6.4 id=interface-urlsearchparams><span class=secno>6.4. </span><span class=content>Interface <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code></span><a class=self-link href=#interface-urlsearchparams></a></h3>

<pre class=idl>[Constructor(optional (USVString or <a data-link-type=idl-name href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a>) <dfn class=idl-code data-dfn-for=URLSearchParams/URLSearchParams() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/URLSearchParams()<method>/init<argument>" id=dom-urlsearchparams-urlsearchparams-init>init<a class=self-link href=#dom-urlsearchparams-urlsearchparams-init></a></dfn> = ""),
 Exposed=(Window,Worker)]
interface <dfn class=idl-code data-dfn-type=interface data-export="" data-global-name="" id=dom-urlsearchparams>URLSearchParams<a class=self-link href=#dom-urlsearchparams></a></dfn> {
  void <a class=idl-code data-global-name="URLSearchParams<interface>/append()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-append title=append()>append</a>(USVString <dfn class=idl-code data-dfn-for=URLSearchParams/append() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/append()<method>/name<argument>" id=dom-urlsearchparams-append-name>name<a class=self-link href=#dom-urlsearchparams-append-name></a></dfn>, USVString <dfn class=idl-code data-dfn-for=URLSearchParams/append() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/append()<method>/value<argument>" id=dom-urlsearchparams-append-value>value<a class=self-link href=#dom-urlsearchparams-append-value></a></dfn>);
  void <a class=idl-code data-global-name="URLSearchParams<interface>/delete()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-delete title=delete()>delete</a>(USVString <dfn class=idl-code data-dfn-for=URLSearchParams/delete() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/delete()<method>/name<argument>" id=dom-urlsearchparams-delete-name>name<a class=self-link href=#dom-urlsearchparams-delete-name></a></dfn>);
  USVString? <a class=idl-code data-global-name="URLSearchParams<interface>/get()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-get title=get()>get</a>(USVString <dfn class=idl-code data-dfn-for=URLSearchParams/get() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/get()<method>/name<argument>" id=dom-urlsearchparams-get-name>name<a class=self-link href=#dom-urlsearchparams-get-name></a></dfn>);
  sequence&lt;USVString&gt; <a class=idl-code data-global-name="URLSearchParams<interface>/getall()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-getall title=getAll()>getAll</a>(USVString <dfn class=idl-code data-dfn-for=URLSearchParams/getAll() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/getAll()<method>/name<argument>" id=dom-urlsearchparams-getall-name>name<a class=self-link href=#dom-urlsearchparams-getall-name></a></dfn>);
  boolean <a class=idl-code data-global-name="URLSearchParams<interface>/has()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-has title=has()>has</a>(USVString <dfn class=idl-code data-dfn-for=URLSearchParams/has() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/has()<method>/name<argument>" id=dom-urlsearchparams-has-name>name<a class=self-link href=#dom-urlsearchparams-has-name></a></dfn>);
  void <a class=idl-code data-global-name="URLSearchParams<interface>/set()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-set title=set()>set</a>(USVString <dfn class=idl-code data-dfn-for=URLSearchParams/set() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/set()<method>/name<argument>" id=dom-urlsearchparams-set-name>name<a class=self-link href=#dom-urlsearchparams-set-name></a></dfn>, USVString <dfn class=idl-code data-dfn-for=URLSearchParams/set() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/set()<method>/value<argument>" id=dom-urlsearchparams-set-value>value<a class=self-link href=#dom-urlsearchparams-set-value></a></dfn>);
  iterable&lt;USVString, USVString&gt;;
  stringifier;
};</pre>

<p>A <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object has an associated
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLSearchParams-list title="URLSearchParams list">list<a class=self-link href=#concept-URLSearchParams-list></a></dfn> of name-value pairs, which is initially
empty.

<p>A <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object has an associated list of zero or more
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLSearchParams-url-object title="URLSearchParams URL object">url objects<a class=self-link href=#concept-URLSearchParams-url-object></a></dfn>, which is initially empty.

<p class=note role=note><code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> objects always use
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a> as
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#encoding title=encoding>encoding</a>, despite the existence of
concepts such as
<a data-link-type=dfn href=#concept-URLUtils-query-encoding title="URLUtils query encoding">query encoding</a>. This is to
encourage developers to migrate towards
<a data-link-type=dfn href=https://encoding.spec.whatwg.org/#utf-8 title=utf-8>utf-8</a>, which they really ought to
have done a long time ago now.

<p>To create a
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLSearchParams-new title="URLSearchParams new">new <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object<a class=self-link href=#concept-URLSearchParams-new></a></dfn>, optionally
using <var>init</var>, run these steps:

<ol>
 <li><p>Let <var>query</var> be a new <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object.

 <li><p>If <var>init</var> is the empty string or null, return
 <var>query</var>.
 

 <li><p>If <var>init</var> is a string,
 set <var>query</var>’s <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a> to the
 result of <a data-link-type=dfn href=#concept-urlencoded-string-parser title="urlencoded string parser">parsing</a>
 <var>init</var>.

 <li><p>If <var>init</var> is a <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object, set
 <var>query</var>’s <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a> to a copy
 of <var>init</var>’s <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.

 <li><p>Return <var>query</var>.
</ol>

<p>A <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object’s
<dfn data-dfn-type=dfn data-noexport="" id=concept-URLSearchParams-update title="URLSearchParams update">update steps<a class=self-link href=#concept-URLSearchParams-update></a></dfn> are to run these steps for
each associated  <a data-link-type=dfn href=#concept-URLSearchParams-url-object title="URLSearchParams URL object">url object</a>
<var>urlObject</var>, in order:

<ol>
 <li><p>Set <var>urlObject</var>’s <a data-link-type=dfn href=#concept-URLUtils-url title="URLUtils URL">url</a>’s
 <a data-link-type=dfn href=#concept-url-query title="URL query">query</a> to the
 <a data-link-type=dfn href=#concept-urlencoded-serializer title="urlencoded serializer">serialization</a> of
 <code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object’s
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.

 <li><p>Run <var>urlObject</var>’s <a data-link-type=dfn href=#pre-update-steps title="pre-update steps">pre-update steps</a>.
</ol>

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=constructor data-export="" id=dom-urlsearchparams-urlsearchparams title=URLSearchParams()><code>URLSearchParams(<var>init</var>)</code><a class=self-link href=#dom-urlsearchparams-urlsearchparams></a></dfn>
constructor, when invoked, must return a
<code><a data-link-type=dfn href=#concept-URLSearchParams-new title="URLSearchParams new">new </a><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object
using <var>init</var> if given.

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=method data-export="" id=dom-urlsearchparams-append title=append()><code>append(<var>name</var>, <var>value</var>)</code><a class=self-link href=#dom-urlsearchparams-append></a></dfn>
method, when invoked, must run these steps:

<ol>
 <li><p>Append a new name-value pair whose name is <var>name</var> and
 value is <var>value</var>, to <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.

 <li><p>Run the <a data-link-type=dfn href=#concept-URLSearchParams-update title="URLSearchParams update">update steps</a>.
</ol>

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=method data-export="" id=dom-urlsearchparams-delete title=delete()><code>delete(<var>name</var>)</code><a class=self-link href=#dom-urlsearchparams-delete></a></dfn>
method, when invoked, must run these steps:

<ol>
 <li><p>Remove all name-value pairs whose name is <var>name</var> from
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.

 <li><p>Run the <a data-link-type=dfn href=#concept-URLSearchParams-update title="URLSearchParams update">update steps</a>.
</ol>

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=method data-export="" id=dom-urlsearchparams-get title=get()><code>get(<var>name</var>)</code><a class=self-link href=#dom-urlsearchparams-get></a></dfn>
method, when invoked, must return the value of the first name-value pair whose name is
<var>name</var> in <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>, and null if
there is no such pair.

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=method data-export="" id=dom-urlsearchparams-getall title=getAll()><code>getAll(<var>name</var>)</code><a class=self-link href=#dom-urlsearchparams-getall></a></dfn>
method, when invoked, must return the values of all name-value pairs whose name is
<var>name</var>, in <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>,
in list order, and the empty sequence otherwise.

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=method data-export="" id=dom-urlsearchparams-set title=set()><code>set(<var>name</var>, <var>value</var>)</code><a class=self-link href=#dom-urlsearchparams-set></a></dfn>
method, when invoked, must run these steps:

<ol>
 <li><p>If there are any name-value pairs whose name is <var>name</var>, in
 <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>, set the value of the first such
 name-value pair to <var>value</var> and remove the others.

 <li><p>Otherwise, append a new name-value pair whose name is <var>name</var> and
 value is <var>value</var>, to <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.

 <li><p>Run the <a data-link-type=dfn href=#concept-URLSearchParams-update title="URLSearchParams update">update steps</a>.
</ol>

<p>The
<dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=method data-export="" id=dom-urlsearchparams-has title=has()><code>has(<var>name</var>)</code><a class=self-link href=#dom-urlsearchparams-has></a></dfn>
method, when invoked, must return true if there is a name-value pair whose name is
<var>name</var> in <a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>, and false
otherwise.

<p>The <a data-link-type=dfn href=http://heycam.github.io/webidl/#dfn-value-pairs-to-iterate-over title="value pairs to iterate over">value pairs to iterate over</a> are the
<a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a> name-value pairs with the key being
the name and the value the value.

<p>The <dfn class=idl-code data-dfn-for=URLSearchParams data-dfn-type=stringifier data-export="" id=dom-urlsearchparams-stringifier>stringifier<a class=self-link href=#dom-urlsearchparams-stringifier></a></dfn> must return the
<a data-link-type=dfn href=#concept-urlencoded-serializer title="urlencoded serializer">serialization</a> of the
<code><a class=idl-code data-link-type=interface href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a></code> object’s
<a data-link-type=dfn href=#concept-URLSearchParams-list title="URLSearchParams list">list</a>.


<h3 class="heading settled" data-level=6.5 id=url-apis-elsewhere><span class=secno>6.5. </span><span class=content>URL APIs elsewhere</span><a class=self-link href=#url-apis-elsewhere></a></h3>

<p>A standard that exposes <a data-link-type=dfn href=#concept-url title=URL>URLs</a>, should expose the
<a data-link-type=dfn href=#concept-url title=URL>URL</a> as a string (by
<a data-link-type=dfn href=#concept-url-serializer title="URL serializer">serializing</a> an internal
<a data-link-type=dfn href=#concept-url title=URL>URL</a>). A standard should not expose a
<code><a data-link-type=dfn href=#concept-url title=URL>URL</a> using a <a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code> object. <code><a class=idl-code data-link-type=interface href=#dom-url title=URL>URL</a></code>
objects are meant for <a data-link-type=dfn href=#concept-url title=URL>URL</a> manipulation. In IDL the
USVString type should be used.

<p class=note role=note>The higher-level notion here is that values are to be exposed as immutable
data structures.

<p>If a standard decides to use a variant of the name "URL" for a feature it defines, it
should name such a feature "url" (i.e. lowercase and with an "l" at the end). Names such
as "URL", "URI", and "IRI" should not be used. However, if the name is a compound, "URL"
(i.e. uppercase) is preferred, e.g. "newURL" and "oldURL".

<p class=note role=note>The <code><a data-link-type=dfn href=https://html.spec.whatwg.org/multipage/comms.html#eventsource title=EventSource>EventSource</a></code> and
<code><a data-link-type=dfn href=https://html.spec.whatwg.org/multipage/comms.html#hashchangeevent title=HashChangeEvent>HashChangeEvent</a></code> interfaces in HTML are examples of
proper naming. <a data-biblio-type=normative data-link-type=biblio href=#biblio-html title=HTML>[HTML]</a>



<h2 class="no-num heading settled" id=acknowledgments><span class=content>Acknowledgments</span><a class=self-link href=#acknowledgments></a></h2>

<p>There have been a lot of people that have helped make
<a class=no-backref data-link-type=dfn href=#concept-url title=URL>URLs</a> more interoperable over the years and
thereby furthered the goals of this standard. Likewise many people have helped making this
standard what it is today.

<p>With that, many thanks to
Adam Barth,
Albert Wiersch,
Alexandre Morgaut,
Arkadiusz Michalski,
Behnam Esfahbod,
Bobby Holley,
Boris Zbarsky,
Brandon Ross,
Dan Appelquist,
Daniel Bratell,
David Håsäther,
David Sheets,
David Singer,
Erik Arvidsson,
Gavin Carothers,
Geoff Richards,
Glenn Maynard,
Henri Sivonen,
Ian Hickson,
James Graham,
James Manger,
James Ross,
Joshua Bell,
Kevin Grandon,
Larry Masinter,
Mark Davis,
Marcos Cáceres,
Martin Dürst,
Mathias Bynens,
Michael Peick,
Michael™ Smith,
Michel Suignard,
Peter Occil,
Rodney Rehm,
Roy Fielding,
Sam Ruby,
Santiago M. Mola,
Simon Pieters,
Simon Sapin,
Tab Atkins,
Tantek Çelik,
Tim Berners-Lee,
Vyacheslav Matva, and
成瀬ゆい (Yui Naruse)
for being awesome!

<p>This standard is written by
<a href=//annevankesteren.nl/ lang=nl>Anne van Kesteren</a>
(<a href=//www.mozilla.org/>Mozilla</a>,
<a href=mailto:annevk@annevk.nl>annevk@annevk.nl</a>).

<p>Per <a href=//creativecommons.org/publicdomain/zero/1.0/ rel=license>CC0</a>, to
the extent possible under law, the editor has waived all copyright and related or
neighboring rights to this work.

</main>
<h2 class="no-num no-ref heading settled" id=conformance><span class=content>Conformance</span><a class=self-link href=#conformance></a></h2>

<p>All diagrams, examples, and notes in this specification are non-normative, as are all sections explicitly marked
non-normative. Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED",  "SHOULD", "SHOULD NOT", "RECOMMENDED",
"MAY", and "OPTIONAL" in the normative parts of this specification are to be interpreted as described in RFC2119. For
readability, these words do not appear in all uppercase letters in this specification. <a data-biblio-type=normative data-link-type=biblio href=#biblio-rfc2119 title=RFC2119>[RFC2119]</a>

<p>Conformance requirements phrased as algorithms or specific steps may be implemented in any manner, so long as the end
result is equivalent.
<h2 class="no-num heading settled" id=references><span class=content>References</span><a class=self-link href=#references></a></h2><h3 class="no-num heading settled" id=normative><span class=content>Normative References</span><a class=self-link href=#normative></a></h3><dl><dt id=biblio-dom title=DOM><a class=self-link href=#biblio-dom></a>[DOM]<dd>Anne van Kesteren; Aryeh Gregor; Ms2ger. <a href=https://dom.spec.whatwg.org/>DOM</a>. URL: <a href=https://dom.spec.whatwg.org/>https://dom.spec.whatwg.org/</a><dt id=biblio-encoding title=ENCODING><a class=self-link href=#biblio-encoding></a>[ENCODING]<dd>Anne van Kesteren. <a href=https://encoding.spec.whatwg.org/>Encoding</a>. URL: <a href=https://encoding.spec.whatwg.org/>https://encoding.spec.whatwg.org/</a><dt id=biblio-fileapi title=FileAPI><a class=self-link href=#biblio-fileapi></a>[FileAPI]<dd>Arun Ranganathan; Jonas Sicking. <a href=http://www.w3.org/TR/FileAPI/>File API</a>. 12 September 2013. LCWD. URL: <a href=http://www.w3.org/TR/FileAPI/>http://www.w3.org/TR/FileAPI/</a><dt id=biblio-html title=HTML><a class=self-link href=#biblio-html></a>[HTML]<dd>Ian Hickson. <a href=https://html.spec.whatwg.org/>HTML</a>. Living Standard. URL: <a href=https://html.spec.whatwg.org/>https://html.spec.whatwg.org/</a><dt id=biblio-idna title=IDNA><a class=self-link href=#biblio-idna></a>[IDNA]<dd>Mark Davis; Michel Suignard. <a href=http://www.unicode.org/reports/tr46/>Unicode IDNA Compatibility Processing</a>. URL: <a href=http://www.unicode.org/reports/tr46/>http://www.unicode.org/reports/tr46/</a><dt id=biblio-webidl title=WebIDL><a class=self-link href=#biblio-webidl></a>[WebIDL]<dd>Cameron McCormack. <a href=http://www.w3.org/TR/WebIDL/>Web IDL</a>. 19 April 2012. CR. URL: <a href=http://www.w3.org/TR/WebIDL/>http://www.w3.org/TR/WebIDL/</a><dt id=biblio-rfc2119 title=rfc2119><a class=self-link href=#biblio-rfc2119></a>[rfc2119]<dd>S. Bradner. <a href=http://www.ietf.org/rfc/rfc2119.txt>Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href=http://www.ietf.org/rfc/rfc2119.txt>http://www.ietf.org/rfc/rfc2119.txt</a><dt id=biblio-rfc4291 title=rfc4291><a class=self-link href=#biblio-rfc4291></a>[rfc4291]<dd>R. Hinden; S. Deering. <a href=http://www.ietf.org/rfc/rfc4291.txt>IP Version 6 Addressing Architecture</a>. February 2006. Draft Standard. URL: <a href=http://www.ietf.org/rfc/rfc4291.txt>http://www.ietf.org/rfc/rfc4291.txt</a></dl><h3 class="no-num heading settled" id=informative><span class=content>Informative References</span><a class=self-link href=#informative></a></h3><dl><dt id=biblio-rfc3986 title=rfc3986><a class=self-link href=#biblio-rfc3986></a>[rfc3986]<dd>T. Berners-Lee; R. Fielding; L. Masinter. <a href=http://www.ietf.org/rfc/rfc3986.txt>Uniform Resource Identifier (URI): Generic Syntax</a>. January 2005. Internet Standard. URL: <a href=http://www.ietf.org/rfc/rfc3986.txt>http://www.ietf.org/rfc/rfc3986.txt</a><dt id=biblio-rfc3987 title=rfc3987><a class=self-link href=#biblio-rfc3987></a>[rfc3987]<dd>M. Duerst; M. Suignard. <a href=http://www.ietf.org/rfc/rfc3987.txt>Internationalized Resource Identifiers (IRIs)</a>. January 2005. Proposed Standard. URL: <a href=http://www.ietf.org/rfc/rfc3987.txt>http://www.ietf.org/rfc/rfc3987.txt</a><dt id=biblio-rfc5952 title=rfc5952><a class=self-link href=#biblio-rfc5952></a>[rfc5952]<dd>S. Kawamura; M. Kawashima. <a href=http://www.ietf.org/rfc/rfc5952.txt>A Recommendation for IPv6 Address Text Representation</a>. August 2010. Proposed Standard. URL: <a href=http://www.ietf.org/rfc/rfc5952.txt>http://www.ietf.org/rfc/rfc5952.txt</a><dt id=biblio-rfc6454 title=rfc6454><a class=self-link href=#biblio-rfc6454></a>[rfc6454]<dd>A. Barth. <a href=http://www.ietf.org/rfc/rfc6454.txt>The Web Origin Concept</a>. December 2011. Proposed Standard. URL: <a href=http://www.ietf.org/rfc/rfc6454.txt>http://www.ietf.org/rfc/rfc6454.txt</a></dl><h2 class="no-num heading settled" id=index><span class=content>Index</span><a class=self-link href=#index></a></h2><ul class=indexlist><li>absolute-path-relative URL, <a href=#concept-absolute-path-relative-url title="section 4.1">4.1</a><li>absolute URL, <a href=#concept-absolute-url title="section 4.1">4.1</a><li>append(), <a href=#dom-urlsearchparams-append title="section 6.4">6.4</a><li>application/x-www-form-urlencoded, <a href=#application-x-www-form-urlencoded-0 title="section 5">5</a><li>ASCII alpha, <a href=#ascii-alpha title="section 1">1</a><li>ASCII alphanumeric, <a href=#ascii-alphanumeric title="section 1">1</a><li>ASCII digits, <a href=#ascii-digits title="section 1">1</a><li>ASCII hex digits, <a href=#ascii-hex-digits title="section 1">1</a><li>authority first slash state, <a href=#authority-first-slash-state title="section 4.2">4.2</a><li>authority ignore slashes state, <a href=#authority-ignore-slashes-state title="section 4.2">4.2</a><li>authority second slash state, <a href=#authority-second-slash-state title="section 4.2">4.2</a><li>authority state, <a href=#authority-state title="section 4.2">4.2</a><li>base, <a href=#dom-url-url-base title="section 6">6</a><li>base URL, <a href=#concept-base-url title="section 4">4</a><li>basic URL parser, <a href=#concept-basic-url-parser title="section 4.2">4.2</a><li>c, <a href=#c title="section 1.1">1.1</a><li>default encode set, <a href=#default-encode-set title="section 2">2</a><li>default port, <a href=#default-port title="section 4">4</a><li>delete(), <a href=#dom-urlsearchparams-delete title="section 6.4">6.4</a><li>domain<ul><li>definition of, <a href=#concept-domain title="section 3">3</a><li>argument for URL/domainToASCII(), <a href=#dom-url-domaintoascii-domain title="section 6">6</a><li>argument for URL/domainToUnicode(), <a href=#dom-url-domaintounicode-domain title="section 6">6</a></ul><li>domain to ASCII, <a href=#concept-domain-to-ascii title="section 3.1">3.1</a><li>domainToASCII(), <a href=#dom-url-domaintoascii title="section 6.2">6.2</a><li>domain to Unicode, <a href=#concept-domain-to-unicode title="section 3.1">3.1</a><li>domainToUnicode(), <a href=#dom-url-domaintounicode title="section 6.2">6.2</a><li>EOF code point, <a href=#eof-code-point title="section 1.1">1.1</a><li>file host state, <a href=#file-host-state title="section 4.2">4.2</a><li>fragment state, <a href=#fragment-state title="section 4.2">4.2</a><li>get(), <a href=#dom-urlsearchparams-get title="section 6.4">6.4</a><li>getAll(), <a href=#dom-urlsearchparams-getall title="section 6.4">6.4</a><li>has(), <a href=#dom-urlsearchparams-has title="section 6.4">6.4</a><li>hash<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-hash title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-hash title="section 6.3">6.3</a></ul><li>host<ul><li>definition of, <a href=#concept-host title="section 3">3</a><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-host title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-host title="section 6.3">6.3</a></ul><li>hostname<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-hostname title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-hostname title="section 6.3">6.3</a></ul><li>hostname state, <a href=#hostname-state title="section 4.2">4.2</a><li>host parser, <a href=#concept-host-parser title="section 3.3">3.3</a><li>host serializer, <a href=#concept-host-serializer title="section 3.4">3.4</a><li>host state, <a href=#host-state title="section 4.2">4.2</a><li>href<ul><li>stringifier for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-href title="section 6.3">6.3</a><li>stringifier for URLUtils, <a href=#dom-urlutils-href title="section 6.3">6.3</a></ul><li>include credentials, <a href=#include-credentials title="section 4">4</a><li>init, <a href=#dom-urlsearchparams-urlsearchparams-init title="section 6.4">6.4</a><li>IPv6, <a href=#concept-ipv6 title="section 3">3</a><li>IPv6 parser, <a href=#concept-ipv6-parser title="section 3.3">3.3</a><li>IPv6 parser Finale, <a href=#concept-ipv6-parser-finale title="section 3.3">3.3</a><li>IPv6 parser IPv4, <a href=#concept-ipv6-parser-ipv4 title="section 3.3">3.3</a><li>IPv6 parser Main, <a href=#concept-ipv6-parser-main title="section 3.3">3.3</a><li>IPv6 piece, <a href=#concept-ipv6-piece title="section 3">3</a><li>IPv6 serializer, <a href=#concept-ipv6-serializer title="section 3.4">3.4</a><li>name<ul><li>argument for URLSearchParams/append(), <a href=#dom-urlsearchparams-append-name title="section 6.4">6.4</a><li>argument for URLSearchParams/delete(), <a href=#dom-urlsearchparams-delete-name title="section 6.4">6.4</a><li>argument for URLSearchParams/get(), <a href=#dom-urlsearchparams-get-name title="section 6.4">6.4</a><li>argument for URLSearchParams/getAll(), <a href=#dom-urlsearchparams-getall-name title="section 6.4">6.4</a><li>argument for URLSearchParams/has(), <a href=#dom-urlsearchparams-has-name title="section 6.4">6.4</a><li>argument for URLSearchParams/set(), <a href=#dom-urlsearchparams-set-name title="section 6.4">6.4</a></ul><li>no scheme state, <a href=#no-scheme-state title="section 4.2">4.2</a><li>origin<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-origin title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-origin title="section 6.3">6.3</a></ul><li>parse error, <a href=#parse-error title="section 1.1">1.1</a><li>password, <a href=#dom-urlutils-password title="section 6.3">6.3</a><li>password encode set, <a href=#password-encode-set title="section 2">2</a><li>pathname<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-pathname title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-pathname title="section 6.3">6.3</a></ul><li>path-relative URL, <a href=#concept-path-relative-url title="section 4.1">4.1</a><li>path segment, <a href=#path-segment title="section 4.1">4.1</a><li>percent decode, <a href=#percent-decode title="section 2">2</a><li>percent encode, <a href=#percent-encode title="section 2">2</a><li>percent-encoded byte, <a href=#percent-encoded-byte title="section 2">2</a><li>port<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-port title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-port title="section 6.3">6.3</a></ul><li>port state, <a href=#port-state title="section 4.2">4.2</a><li>pre-update steps, <a href=#pre-update-steps title="section 6">6</a><li>protocol<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-protocol title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-protocol title="section 6.3">6.3</a></ul><li>query state, <a href=#query-state title="section 4.2">4.2</a><li>relative flag, <a href=#relative-flag title="section 4">4</a><li>relative or authority state, <a href=#relative-or-authority-state title="section 4.2">4.2</a><li>relative path start state, <a href=#relative-path-start-state title="section 4.2">4.2</a><li>relative path state, <a href=#relative-path-state title="section 4.2">4.2</a><li>relative scheme, <a href=#relative-scheme title="section 4">4</a><li>relative slash state, <a href=#relative-slash-state title="section 4.2">4.2</a><li>relative state, <a href=#relative-state title="section 4.2">4.2</a><li>relative URL, <a href=#concept-relative-url title="section 4.1">4.1</a><li>remaining, <a href=#remaining title="section 1.1">1.1</a><li>scheme data state, <a href=#scheme-data-state title="section 4.2">4.2</a><li>scheme-relative URL, <a href=#concept-scheme-relative-url title="section 4.1">4.1</a><li>scheme start state, <a href=#scheme-start-state title="section 4.2">4.2</a><li>scheme state, <a href=#scheme-state title="section 4.2">4.2</a><li>search<ul><li>attribute for URLUtilsReadOnly, <a href=#dom-urlutilsreadonly-search title="section 6.3">6.3</a><li>attribute for URLUtils, <a href=#dom-urlutils-search title="section 6.3">6.3</a></ul><li>searchParams, <a href=#dom-urlutils-searchparams title="section 6.3">6.3</a><li>set(), <a href=#dom-urlsearchparams-set title="section 6.4">6.4</a><li>set the password, <a href=#set-the-password title="section 4.2">4.2</a><li>set the username, <a href=#set-the-username title="section 4.2">4.2</a><li>simple encode set, <a href=#simple-encode-set title="section 2">2</a><li>stringifier, <a href=#dom-urlsearchparams-stringifier title="section 6.4">6.4</a><li>URL<ul><li>definition of, <a href=#concept-url title="section 4">4</a><li>(interface), <a href=#dom-url title="section 6">6</a></ul><li>URL(), <a href=#dom-url-url title="section 6.1">6.1</a><li>url, <a href=#dom-url-url-url title="section 6">6</a><li>URL code points, <a href=#url-code-points title="section 4.1">4.1</a><li>urlencoded byte serializer, <a href=#concept-urlencoded-byte-serializer title="section 5.2">5.2</a><li>urlencoded parser, <a href=#concept-urlencoded-parser title="section 5.1">5.1</a><li>urlencoded serializer, <a href=#concept-urlencoded-serializer title="section 5.2">5.2</a><li>urlencoded string parser, <a href=#concept-urlencoded-string-parser title="section 5.3">5.3</a><li>URL fragment, <a href=#concept-url-fragment title="section 4">4</a><li>URL host, <a href=#concept-url-host title="section 4">4</a><li>URL object, <a href=#concept-url-object title="section 4">4</a><li>URL origin, <a href=#concept-url-origin title="section 4.4">4.4</a><li>URL parser, <a href=#concept-url-parser title="section 4.2">4.2</a><li>URL password, <a href=#concept-url-password title="section 4">4</a><li>URL path, <a href=#concept-url-path title="section 4">4</a><li>URL port, <a href=#concept-url-port title="section 4">4</a><li>URL query, <a href=#concept-url-query title="section 4">4</a><li>URL scheme, <a href=#concept-url-scheme title="section 4">4</a><li>URL scheme data, <a href=#concept-url-scheme-data title="section 4">4</a><li>URLSearchParams, <a href=#dom-urlsearchparams title="section 6.4">6.4</a><li>URLSearchParams(), <a href=#dom-urlsearchparams-urlsearchparams title="section 6.4">6.4</a><li>URLSearchParams list, <a href=#concept-URLSearchParams-list title="section 6.4">6.4</a><li>URLSearchParams new, <a href=#concept-URLSearchParams-new title="section 6.4">6.4</a><li>URLSearchParams update, <a href=#concept-URLSearchParams-update title="section 6.4">6.4</a><li>URLSearchParams URL object, <a href=#concept-URLSearchParams-url-object title="section 6.4">6.4</a><li>URL serializer, <a href=#concept-url-serializer title="section 4.3">4.3</a><li>URL units, <a href=#url-units title="section 4.1">4.1</a><li>URL Userinfo, <a href=#concept-url-userinfo title="section 4.1">4.1</a><li>URL username, <a href=#concept-url-username title="section 4">4</a><li>URLUtils, <a href=#dom-urlutils title="section 6">6</a><li>URLUtils get the base, <a href=#concept-URLUtils-get-the-base title="section 6">6</a><li>URLUtils input, <a href=#concept-URLUtils-input title="section 6">6</a><li>URLUtils query encoding, <a href=#concept-URLUtils-query-encoding title="section 6">6</a><li>URLUtils query object, <a href=#concept-URLUtils-query-object title="section 6">6</a><li>URLUtilsReadOnly, <a href=#dom-urlutilsreadonly title="section 6">6</a><li>URLUtils set the input, <a href=#concept-URLUtils-set-the-input title="section 6">6</a><li>URLUtils update, <a href=#concept-URLUtils-update title="section 6">6</a><li>URLUtils URL, <a href=#concept-URLUtils-url title="section 6">6</a><li>username, <a href=#dom-urlutils-username title="section 6.3">6.3</a><li>username encode set, <a href=#username-encode-set title="section 2">2</a><li>utf-8 percent encode, <a href=#utf-8-percent-encode title="section 2">2</a><li>valid domain, <a href=#valid-domain title="section 3.2">3.2</a><li>value<ul><li>argument for URLSearchParams/append(), <a href=#dom-urlsearchparams-append-value title="section 6.4">6.4</a><li>argument for URLSearchParams/set(), <a href=#dom-urlsearchparams-set-value title="section 6.4">6.4</a></ul></ul><h2 class="no-num heading settled" id=idl-index><span class=content>IDL Index</span><a class=self-link href=#idl-index></a></h2><pre class=idl>[Constructor(USVString <a data-dfn-for=URL/URL() data-dfn-type=argument data-export="" data-global-name="URL<interface>/URL()<method>/url<argument>" href=#dom-url-url-url title=url>url</a>, optional USVString <a data-dfn-for=URL/URL() data-dfn-type=argument data-export="" data-global-name="URL<interface>/URL()<method>/base<argument>" href=#dom-url-url-base title=base>base</a> = "about:blank"),
 Exposed=(Window,Worker)]
interface <a data-dfn-type=interface data-export="" data-global-name="" href=#dom-url title=URL>URL</a> {
  static USVString <a class=idl-code data-global-name="URL<interface>/domaintoascii()<method>" data-link-for=URL data-link-type=method href=#dom-url-domaintoascii title=domainToASCII()>domainToASCII</a>(USVString <a data-dfn-for=URL/domainToASCII() data-dfn-type=argument data-export="" data-global-name="URL<interface>/domainToASCII()<method>/domain<argument>" href=#dom-url-domaintoascii-domain title=domain>domain</a>);
  static USVString <a class=idl-code data-global-name="URL<interface>/domaintounicode()<method>" data-link-for=URL data-link-type=method href=#dom-url-domaintounicode title=domainToUnicode()>domainToUnicode</a>(USVString <a data-dfn-for=URL/domainToUnicode() data-dfn-type=argument data-export="" data-global-name="URL<interface>/domainToUnicode()<method>/domain<argument>" href=#dom-url-domaintounicode-domain title=domain>domain</a>);
};
<a data-link-type=idl-name href=#dom-url title=URL>URL</a> implements <a data-link-type=idl-name href=#dom-urlutils title=URLUtils>URLUtils</a>;

[NoInterfaceObject,
 Exposed=(Window,Worker)]
interface <a data-dfn-type=interface data-export="" data-global-name="" href=#dom-urlutils title=URLUtils>URLUtils</a> {
  stringifier attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/href<stringifier>" data-link-for=URLUtils data-link-type=stringifier href=#dom-urlutils-href title=href>href</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/origin<attribute>" data-link-for=URLUtils data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutils-origin title=origin>origin</a>;

           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/protocol<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-protocol title=protocol>protocol</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/username<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-username title=username>username</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/password<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-password title=password>password</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/host<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-host title=host>host</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/hostname<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-hostname title=hostname>hostname</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/port<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-port title=port>port</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/pathname<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-pathname title=pathname>pathname</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/search<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-search title=search>search</a>;
           attribute <a data-link-type=idl-name href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a> <a class=idl-code data-global-name="URLUtils<interface>/searchparams<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="URLSearchParams " href=#dom-urlutils-searchparams title=searchParams>searchParams</a>;
           attribute USVString <a class=idl-code data-global-name="URLUtils<interface>/hash<attribute>" data-link-for=URLUtils data-link-type=attribute data-type="USVString " href=#dom-urlutils-hash title=hash>hash</a>;
};

[NoInterfaceObject,
 Exposed=(Window,Worker)]
interface <a data-dfn-type=interface data-export="" data-global-name="" href=#dom-urlutilsreadonly title=URLUtilsReadOnly>URLUtilsReadOnly</a> {
  stringifier readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/href<stringifier>" data-link-for=URLUtilsReadOnly data-link-type=stringifier href=#dom-urlutilsreadonly-href title=href>href</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/origin<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-origin title=origin>origin</a>;

  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/protocol<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-protocol title=protocol>protocol</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/host<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-host title=host>host</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/hostname<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-hostname title=hostname>hostname</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/port<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-port title=port>port</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/pathname<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-pathname title=pathname>pathname</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/search<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-search title=search>search</a>;
  readonly attribute USVString <a class=idl-code data-global-name="URLUtilsReadOnly<interface>/hash<attribute>" data-link-for=URLUtilsReadOnly data-link-type=attribute data-readonly="" data-type="USVString " href=#dom-urlutilsreadonly-hash title=hash>hash</a>;
};
[Constructor(optional (USVString or <a data-link-type=idl-name href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a>) <a data-dfn-for=URLSearchParams/URLSearchParams() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/URLSearchParams()<method>/init<argument>" href=#dom-urlsearchparams-urlsearchparams-init title=init>init</a> = ""),
 Exposed=(Window,Worker)]
interface <a data-dfn-type=interface data-export="" data-global-name="" href=#dom-urlsearchparams title=URLSearchParams>URLSearchParams</a> {
  void <a class=idl-code data-global-name="URLSearchParams<interface>/append()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-append title=append()>append</a>(USVString <a data-dfn-for=URLSearchParams/append() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/append()<method>/name<argument>" href=#dom-urlsearchparams-append-name title=name>name</a>, USVString <a data-dfn-for=URLSearchParams/append() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/append()<method>/value<argument>" href=#dom-urlsearchparams-append-value title=value>value</a>);
  void <a class=idl-code data-global-name="URLSearchParams<interface>/delete()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-delete title=delete()>delete</a>(USVString <a data-dfn-for=URLSearchParams/delete() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/delete()<method>/name<argument>" href=#dom-urlsearchparams-delete-name title=name>name</a>);
  USVString? <a class=idl-code data-global-name="URLSearchParams<interface>/get()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-get title=get()>get</a>(USVString <a data-dfn-for=URLSearchParams/get() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/get()<method>/name<argument>" href=#dom-urlsearchparams-get-name title=name>name</a>);
  sequence&lt;USVString&gt; <a class=idl-code data-global-name="URLSearchParams<interface>/getall()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-getall title=getAll()>getAll</a>(USVString <a data-dfn-for=URLSearchParams/getAll() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/getAll()<method>/name<argument>" href=#dom-urlsearchparams-getall-name title=name>name</a>);
  boolean <a class=idl-code data-global-name="URLSearchParams<interface>/has()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-has title=has()>has</a>(USVString <a data-dfn-for=URLSearchParams/has() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/has()<method>/name<argument>" href=#dom-urlsearchparams-has-name title=name>name</a>);
  void <a class=idl-code data-global-name="URLSearchParams<interface>/set()<method>" data-link-for=URLSearchParams data-link-type=method href=#dom-urlsearchparams-set title=set()>set</a>(USVString <a data-dfn-for=URLSearchParams/set() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/set()<method>/name<argument>" href=#dom-urlsearchparams-set-name title=name>name</a>, USVString <a data-dfn-for=URLSearchParams/set() data-dfn-type=argument data-export="" data-global-name="URLSearchParams<interface>/set()<method>/value<argument>" href=#dom-urlsearchparams-set-value title=value>value</a>);
  iterable&lt;USVString, USVString&gt;;
  stringifier;
};
</pre>