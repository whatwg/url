<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Windows Drive Letter Test</title>
</head>
<body>
    <script>
        // Test case: Windows drive letter with pipe should normalize to colon
        // but preserve the case of the drive letter
        
        const testCases = [
            { input: "file:///C|/test", expected: "file:///C:/test", desc: "Uppercase C with pipe" },
            { input: "file:///c|/test", expected: "file:///c:/test", desc: "Lowercase c with pipe" },
            { input: "file:///D|/foo/bar", expected: "file:///D:/foo/bar", desc: "Uppercase D with pipe" },
            { input: "file:///d|/foo/bar", expected: "file:///d:/foo/bar", desc: "Lowercase d with pipe" },
        ];
        
        console.log("Testing Windows drive letter normalization:");
        let passed = 0;
        let failed = 0;
        
        testCases.forEach(test => {
            try {
                const url = new URL(test.input);
                const result = url.href;
                if (result === test.expected) {
                    console.log(`✅ PASS: ${test.desc} - ${test.input} → ${result}`);
                    passed++;
                } else {
                    console.log(`❌ FAIL: ${test.desc} - Expected ${test.expected}, got ${result}`);
                    failed++;
                }
            } catch (e) {
                console.log(`❌ ERROR: ${test.desc} - ${e.message}`);
                failed++;
            }
        });
        
        console.log(`\nResults: ${passed} passed, ${failed} failed`);
    </script>
</body>
</html>
